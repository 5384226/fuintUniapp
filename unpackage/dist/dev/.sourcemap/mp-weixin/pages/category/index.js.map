{"version":3,"sources":["uni-app:///main.js","webpack:///D:/项目/fuintUniapp/pages/category/index.vue?769d","webpack:///D:/项目/fuintUniapp/pages/category/index.vue?169e","webpack:///D:/项目/fuintUniapp/pages/category/index.vue?edb3","webpack:///D:/项目/fuintUniapp/pages/category/index.vue?cdf4","uni-app:///pages/category/index.vue","webpack:///D:/项目/fuintUniapp/pages/category/index.vue?2c64","webpack:///D:/项目/fuintUniapp/pages/category/index.vue?ab37","webpack:///D:/项目/fuintUniapp/pages/category/index.vue?5b20","webpack:///D:/项目/fuintUniapp/pages/category/index.vue?8b1c"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","Search","SkuPopup","Empty","Location","data","goodsCart","totalNum","totalPrice","scrollHeight","curIndex","scrollTop","list","isLoading","showSkuPopup","skuMode","goods","storeInfo","scrollIntoView","categoryPositions","scrollTimer","isManualSelect","onLoad","app","onShow","uni","type","success","fail","methods","getPageData","Promise","GoodsApi","CartApi","then","setTimeout","finally","item","total","totalBuyNum","calculateCategoryPositions","query","rects","index","top","height","cumulativeHeight","handleScroll","clearTimeout","updateActiveCategory","activeIndex","onGetStoreInfo","settingApi","onTargetGoods","goodsId","setListHeight","handleSelectNav","console","onSaveCart","resolve","catch","onAddCart","doSubmit","onShowSkuPopup","goodsData","onShareAppMessage","title","path","onShareTimeline"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACa;AACyB;;;AAG1F;AAC0M;AAC1M,gBAAgB,yMAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACxBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC/BA;AAAA;AAAA;AAAA;AAAwxB,CAAgB,2vBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;ACgG5yB;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMA;AAAA,eAEA;EACAC;IACAC;IACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;IACA;EACA;EAEAC;IACA;IACAC;EACA;EAEAC;IACA;IACAD;IACAA;IACAE;MACAC;MACAC;QACAF;QACAA;QACAF;MACA;MACAK;QACA;MAAA;IAEA;EACA;EAEAC;IACAC;MAAA;MACA;MACAP;MACAQ,aACAC,qBACAC,eACA,EACAC;QACAX;QACAA;QACAA;QACA;QACA;;QAEA;QACA;UACA;UACAY;YACA;UACA;QACA;MACA,GACAC;QACAb;QACAA;QACAA;UACA;UACAc;YACA;YACAd;cACA;gBACAe;gBACAC;gBACAhB;cACA;YACA;YACAA;UACA;UACAA;QACA;MACA;IACA;IAEA;IACAiB;MAAA;MACA;MACA;MAEAC;MAEAA;QACA;UACA;UACA;UAEAC;YACA;cACA;cACA;gBACAC;gBACAC;gBACAC;cACA;cACA;cACAC;YACA;UACA;QACA;MACA;IACA;IAEA;IACAC;MAAA;MACA;QACA;QACA;QACA;MACA;;MAEA;MACAC;MACA;QACA;QACA;MACA;IACA;IAEA;IACAC;MACA;;MAEA;MACA;MACA;;MAEA;MACA;MACA;QACA;QACA;UACAC;QACA;UACA;QACA;MACA;;MAEA;MACA;QACA;MACA;IACA;IAEAC;MACA;MACAC,0BACAlB;QACAX;MACA;IACA;IAEA8B;MACA;QAAAC;MAAA;IACA;IAEAC;MACA;MACA9B;QACAE;UACAJ;QACA;MACA;IACA;IAEA;IACAiC;MAAA;MACA;MACA;;MAEA;MACA;MACAC;MACA;QACA;QACA;;QAEA;QACA;;QAEA;QACAtB;UACA;QACA;MACA;;MAEA;MACAa;IACA;IAEAU;MACA;MACA;QACAzB,8BACAC;UACAX;UACAoC;QACA,GACAC;UACAH;QACA;MACA;IACA;IAEAI;MACA;MACA;IACA;IAEAC;MACA;QACA;MACA;QACA;MACA;IACA;IAEAC;MACA;MACAxC;MACA;QACAS,yBACAE;UACA;UAEA;YACA8B;cACAA;cACAA;YACA;UACA;UAEAzC;UACAA;UACAA;UACAA;UACAoC;QACA,GACAC;UAAA;QAAA;MACA;IACA;EACA;EAEAK;IACA;IACA;MACAC;MACAC;IACA;EACA;EAEAC;IACA;IACA;MACAF;MACAC;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACzYA;AAAA;AAAA;AAAA;AAAonC,CAAgB,wiCAAG,EAAC,C;;;;;;;;;;;ACAxoC;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA;AAAA;AAA++C,CAAgB,k3CAAG,EAAC,C;;;;;;;;;;;ACAngD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/category/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/category/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=2f754cba&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./index.vue?vue&type=style&index=1&id=2f754cba&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2f754cba\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/category/index.vue\"\nexport default component.exports","export * from \"-!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=template&id=2f754cba&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.list.length\n  var g1 =\n    g0 > 0 && _vm.list[_vm.curIndex]\n      ? _vm.list[_vm.curIndex].goodsList.length\n      : null\n  var g2 =\n    g0 > 0 && _vm.list[_vm.curIndex]\n      ? _vm.list[_vm.curIndex].goodsList.length\n      : null\n  var g3 = _vm.totalPrice.toFixed(2)\n  var g4 = _vm.list.length\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n        g3: g3,\n        g4: g4,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"container\">\n    <!--店铺切换-->\n    <Location v-if=\"storeInfo\" :storeInfo=\"storeInfo\"/>\n    \n    <!-- 搜索框 -->\n    <Search tips=\"请输入搜索关键字...\" @event=\"$navTo('pages/search/index')\" />\n\n    <view class=\"cate-content dis-flex\" v-if=\"list.length > 0\">\n      <!-- 左侧 分类 -->\n      <scroll-view class=\"cate-left f-28\" scroll-y :show-scrollbar=\"false\" :enhanced=\"true\" :style=\"{ height: `${scrollHeight}px` }\">\n          <view v-for=\"(item, index) in list\" :key=\"index\">\n              <text class=\"cart-badge\" v-if=\"item.total\">{{ item.total }}</text>\n              <view class=\"type-nav\" :class=\"{ selected: curIndex == index }\" @click=\"handleSelectNav(index)\">\n                  <image class=\"logo\" lazy-load :lazy-load-margin=\"0\" :src=\"item.logo ? item.logo : '/static/empty-02.png'\"></image>\n                  <view class=\"name\">{{ item.name }}</view>\n              </view>\n          </view>\n      </scroll-view>\n\n      <!-- 右侧 商品 -->\n      <scroll-view \n        class=\"cate-right b-f\" \n        :scroll-top=\"scrollTop\" \n        :scroll-y=\"true\" \n        :style=\"{ height: `${scrollHeight}px` }\"\n        @scroll=\"handleScroll\"\n        scroll-with-animation\n        :scroll-into-view=\"scrollIntoView\"\n      >\n        <view v-if=\"list[curIndex]\">\n          <view class=\"cate-right-cont\">\n            <view class=\"cate-two-box\">\n              <view v-if=\"list[curIndex].goodsList.length\" class=\"cate-cont-box\">\n                <!-- 为每个分类添加锚点和统一class -->\n                <view \n                  v-for=\"(category, catIndex) in list\" \n                  :key=\"catIndex\" \n                  :id=\"`category-${catIndex}`\" \n                  class=\"category-item\"\n                >\n                  <view class=\"category-title\">{{category.name}}</view>\n                  <view class=\"flex-five item\" v-for=\"(item, idx) in category.goodsList\" :key=\"idx\">\n                    <view class=\"cate-img\">\n                      <image v-if=\"item.logo\" lazy-load :lazy-load-margin=\"0\" :src=\"item.logo\" @click=\"onTargetGoods(item.id)\"></image>\n                    </view>\n                    <view class=\"cate-info\">\n                      <view class=\"base\">\n                        <text class=\"name text\">{{ item.name }}</text>\n                        <text class=\"stock text\">库存:{{ item.stock ? item.stock : 0 }} 已售:{{ item.initSale ? item.initSale : 0 }}</text>\n                      </view>\n                      <view class=\"action\">\n                          <text class=\"price\">￥{{ item.price ? item.price : 0 }}</text>\n                          <view class=\"cart\">\n                              <view v-if=\"item.isSingleSpec === 'Y'\" class=\"singleSpec\">\n                                  <view class=\"ii do-minus\" v-if=\"item.buyNum\" @click=\"onSaveCart(item.id, '-')\"></view>\n                                  <view class=\"ii num\" v-if=\"item.buyNum\">{{ (item.buyNum != undefined) ? item.buyNum : 0 }}</view>\n                                  <view class=\"ii do-add\" v-if=\"item.stock > 0\" @click=\"onSaveCart(item.id, '+')\"></view>\n                              </view>\n                              <view v-if=\"item.isSingleSpec === 'N'\" class=\"multiSpec\">\n                                  <text class=\"num-badge\" v-if=\"item.buyNum\">{{ item.buyNum }}</text>\n                                  <view class=\"select-spec\" @click=\"onShowSkuPopup(2, item.id)\">选规格</view>\n                              </view>\n                          </view>\n                      </view>\n                    </view>\n                  </view>\n                </view>\n              </view>\n              <empty v-if=\"!list[curIndex].goodsList.length\" :isLoading=\"isLoading\" tips=\"暂无商品~\"></empty>\n            </view>\n          </view>\n        </view>\n      </scroll-view>\n    </view>\n    \n    <!-- 商品SKU弹窗 -->\n    <SkuPopup v-if=\"!isLoading\" v-model=\"showSkuPopup\" :skuMode=\"skuMode\" :goods=\"goods\" @addCart=\"onAddCart\"/>\n    \n    <view class=\"flow-fixed-footer b-f m-top10\">\n      <view class=\"dis-flex chackout-box\">\n        <view class=\"chackout-left pl-12\">\n          <view class=\"col-amount-do\">总金额：<text class=\"amount\">￥{{ totalPrice.toFixed(2) }}</text></view>\n          <view class=\"col-amount-view\">共计：{{ totalNum }} 件</view>\n        </view>\n        <view class=\"chackout-right\" @click=\"doSubmit()\">\n          <view class=\"flow-btn f-32\">去结算</view>\n        </view>\n      </view>\n    </view>\n    \n    <empty v-if=\"!list.length\" :isLoading=\"isLoading\" />\n  </view>\n</template>\n\n<script>\n  import { setCartTabBadge, setCartTotalNum } from '@/utils/app'\n  import * as CartApi from '@/api/cart'\n  import * as GoodsApi from '@/api/goods'\n  import * as settingApi from '@/api/setting'\n  import Search from '@/components/search'\n  import Empty from '@/components/empty'\n  import SkuPopup from './components/SkuPopup'\n  import Location from '@/components/page/location'\n\n  const App = getApp()\n\n  export default {\n    components: {\n      Search,\n      SkuPopup,\n      Empty,\n      Location\n    },\n    data() {\n      return {\n        goodsCart: [],\n        totalNum: 0,\n        totalPrice: 0.00,\n        // 列表高度\n        scrollHeight: 500,\n        // 一级分类：指针\n        curIndex: 0,\n        // 内容区竖向滚动条位置\n        scrollTop: 0,\n        // 分类列表\n        list: [],\n        // 正在加载中\n        isLoading: true,\n        showSkuPopup: false,\n        skuMode: 1,\n        goods: {},\n        storeInfo: null,\n        // 用于自动滚动定位\n        scrollIntoView: '',\n        // 存储每个分类的位置信息\n        categoryPositions: [],\n        // 防抖计时器\n        scrollTimer: null,\n        // 是否正在手动切换分类\n        isManualSelect: false\n      }\n    },\n\n    onLoad() {\n      const app = this\n      app.setListHeight()\n    },\n\n    onShow() {\n      const app = this;\n      app.getPageData();\n      app.onGetStoreInfo();\n      uni.getLocation({\n          type: 'gcj02',\n          success(res){\n              uni.setStorageSync('latitude', res.latitude);\n              uni.setStorageSync('longitude', res.longitude);\n              app.onGetStoreInfo();\n          },\n          fail(e) {\n            // empty\n          }\n      })\n    },\n\n    methods: {\n      getPageData() {\n        const app = this\n        app.isLoading = true\n        Promise.all([\n            GoodsApi.cateList(),\n            CartApi.list()\n          ])\n          .then(result => {\n            app.list = result[0].data;\n            app.totalNum = result[1].data.totalNum;\n            app.goodsCart = result[1].data.list;\n            setCartTotalNum(app.totalNum);\n            setCartTabBadge();\n            \n            // 数据加载完成后，计算分类位置\n            this.$nextTick(() => {\n              // 延迟计算以确保DOM渲染完成\n              setTimeout(() => {\n                this.calculateCategoryPositions();\n              }, 300);\n            });\n          })\n          .finally(() => {\n              app.isLoading = false\n              app.totalPrice = 0\n              app.list.forEach(function(item, index) {\n                  let total = 0\n                  item.goodsList.forEach(function(goods, key) {\n                      let totalBuyNum = 0\n                      app.goodsCart.forEach(function(cart){\n                         if (goods.id == cart.goodsId) {\n                             total = total + cart.num\n                             totalBuyNum = totalBuyNum + cart.num\n                             app.totalPrice = app.totalPrice + (cart.goodsInfo.price * cart.num)\n                         } \n                      })\n                      app.$set(app.list[index].goodsList[key], 'buyNum', totalBuyNum)\n                  })\n                  app.$set(app.list[index], 'total', total)\n              })\n          })\n      },\n      \n      // 计算每个分类的位置信息（累积高度）\n      calculateCategoryPositions() {\n        const query = uni.createSelectorQuery().in(this);\n        this.categoryPositions = [];\n        \n        query.selectAll('.category-item').boundingClientRect();\n        \n        query.exec(res => {\n          if (res && res[0]) {\n            const rects = res[0];\n            let cumulativeHeight = 0;\n            \n            rects.forEach((rect, index) => {\n              if (rect) {\n                // 保存每个分类的起始位置（累积高度）\n                this.categoryPositions.push({\n                  index,\n                  top: cumulativeHeight,\n                  height: rect.height\n                });\n                // 累加高度\n                cumulativeHeight += rect.height;\n              }\n            });\n          }\n        });\n      },\n      \n      // 滚动事件处理\n      handleScroll(e) {\n        if (this.isManualSelect) {\n          // 手动选择后重置标志\n          this.isManualSelect = false;\n          return;\n        }\n        \n        // 防抖处理\n        clearTimeout(this.scrollTimer);\n        this.scrollTimer = setTimeout(() => {\n          const scrollTop = e.detail.scrollTop;\n          this.updateActiveCategory(scrollTop);\n        }, 50);\n      },\n      \n      // 根据滚动位置更新当前激活的分类\n      updateActiveCategory(scrollTop) {\n        if (!this.categoryPositions.length) return;\n        \n        // 增加一个偏移量，使切换更平滑\n        const offset = 200;\r\n        const adjustedScrollTop = scrollTop + offset;\n        \n        // 找到当前应该激活的分类\n        let activeIndex = 0;\n        for (let i = 0; i < this.categoryPositions.length; i++) {\r\n             const position = this.categoryPositions[i];\r\n             if (adjustedScrollTop >= position.top) {\r\n                 activeIndex = position.index;\r\n             } else {\r\n                 break;\r\n             }\r\n        }\n        \n        // 更新当前激活的分类\n        if (this.curIndex !== activeIndex) {\n            this.curIndex = activeIndex;\n        }\n      },\n      \n      onGetStoreInfo() {\n         const app = this\n         settingApi.systemConfig()\n           .then(result => {\n               app.storeInfo = result.data.storeInfo;\n           })\n       },\n      \n      onTargetGoods(goodsId) {\n        this.$navTo(`pages/goods/detail`, { goodsId })\n      },\n\n      setListHeight() {\n        const app = this\n        uni.getSystemInfo({\n          success(res) {\n            app.scrollHeight = res.windowHeight - 120\n          }\n        })\n      },\n\n      // 一级分类：选中分类\n      handleSelectNav(index) {\n        this.isManualSelect = true;\n        this.curIndex = index;\n        \n        // 找到对应分类的位置\n        const position = this.categoryPositions[index];\r\n        console.log(\"categoryPositions === \", this.categoryPositions);\n        if (position) {\n          // 使用scrollTop实现精准滚动\n          this.scrollTop = position.top;\n          \n          // 同时使用scroll-into-view作为备用方案\n          this.scrollIntoView = `category-${index}`;\n          \n          // 短暂延迟后重置scrollIntoView\n          setTimeout(() => {\n            this.scrollIntoView = '';\n          }, 500);\n        }\n        \n        // 防止快速点击导致的滚动问题\n        clearTimeout(this.scrollTimer);\n      },\n      \n      onSaveCart(goodsId, action) {\n        const app = this\n        return new Promise((resolve, reject) => {\n          CartApi.save(goodsId, action)\n            .then(result => {\n                app.getPageData();\n                resolve(result);\n            })\n            .catch(err => {\n                console.log(err);\n            })\n        })\n      },\n      \n      onAddCart(total) {\n        this.getPageData();\n        this.$toast(\"添加购物车成功\");\n      },\n      \n      doSubmit() {\n        if (this.totalPrice > 0) {\n            this.$navTo('pages/cart/index')\n        } else {\n            this.$error(\"请先选择商品\")\n        }\n      },\n      \n      onShowSkuPopup(skuMode, goodsId) {\n        const app = this\n        app.isLoading = true\n        return new Promise((resolve, reject) => {\n          GoodsApi.detail(goodsId)\n            .then(result => {\n              const goodsData = result.data\n              \n              if (goodsData.skuList) {\n                  goodsData.skuList.forEach(function(sku, index) {\n                    goodsData.skuList[index].specIds = sku.specIds.split('-')\n                    goodsData.skuList[index].skuId = sku.id\n                  })\n              }\n              \n              app.goods = goodsData\n              app.skuMode = skuMode\n              app.showSkuPopup = !app.showSkuPopup\n              app.isLoading = false\n              resolve(result)\n            })\n            .catch(err => reject(err))\n        })\n      },\n    },\n\n    onShareAppMessage() {\n      const app = this\n      return {\n        title: _this.templet.shareTitle,\n        path: '/pages/category/index?' + app.$getShareUrlParams()\n      }\n    },\n\n    onShareTimeline() {\n      const app = this\n      return {\n        title: _this.templet.shareTitle,\n        path: '/pages/category/index?' + app.$getShareUrlParams()\n      }\n    }\n  }\n</script>\n\n<style>\n  page {\n    background: #fff;\n  }\n</style>\n<style lang=\"scss\" scoped>\n  .cate-content {\n    background: #fff;\n    margin-top: 118rpx;\n    /* #ifdef H5 */\n    margin-top: 124rpx;\n    /* #endif */\n  }\n  .cate-wrapper {\n    padding: 0 20rpx 20rpx 20rpx;\n    box-sizing: border-box;\n    overflow: hidden;\n  }\n  /* 分类内容 */\n  .cate-content {\n    width: 100%;\n    overflow: hidden;\n  }\n  .cate-left {\n    flex-direction: column;\n    display: flex;\n    width: 200rpx;\n    color: #444;\n    height: 100%;\n    background: #f8f8f8;\n    margin-bottom: 120rpx;\n    overflow: hidden;\n    &::-webkit-scrollbar {\n        display: none !important;\n        width: 0 !important;\n        height: 0 !important;\n    }\n    .cart-badge {\n      position: absolute;\n      right: 1rpx;\n      margin-top: 10rpx;\n      margin-right: 5rpx;\n      font-size: 18rpx;\n      background: #fa5151;\n      z-index: 999;\n      text-align: center;\n      line-height: 28rpx;\n      color: #ffffff;\n      border-radius: 50%;\n      min-width: 32rpx;\n      padding: 5rpx 13rpx 5rpx 13rpx;\n    }\n  }\n  .cate-right {\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    margin-bottom: 80rpx;\n  }\n\n  .cate-right-cont {\n    width: 100%;\n    display: flex;\n    flex-flow: row wrap;\n    align-content: flex-start;\n    padding-top: 10rpx;\n  }\n\n  .type-nav {\n    position: relative;\n    height: 140rpx;\n    text-align: center;\n    z-index: 10;\n    display: block;\n    font-size: 26rpx;\n    padding: 20rpx 0rpx 126rpx 0rpx;\n    .logo {\n        width: 60rpx;\n        height: 60rpx;\n        border-radius: 60rpx;\n        margin: 0rpx;\n        padding: 0rpx;\n    }\n    .name {\n        margin-top: 2rpx;\n        width: 100%;\n        overflow-x: hidden;\n        height: 40rpx;\n        line-height: 40rpx;\n        text-align: center;\n    }\n  }\n\n  .type-nav.selected {\n    color: #666666;\n    background: #ffffff;\n    border-right: none;\n    border-left: solid 10rpx #f03c3c;\n    font-weight: bold;\n    font-size: 28rpx;\n  }\n\n  .cate-cont-box {\n    margin-bottom: 10rpx;\n    padding-bottom: 10rpx;\n    overflow: hidden;\n    height: auto;\n    display: block;\n    .item {\n        height: 220rpx;\n        display: block;\n        padding-top: 5rpx;\n        border-radius: 3rpx;\n        margin-bottom: 5rpx;\n    }\n    \n    .category-title {\n      font-size: 32rpx;\n      font-weight: bold;\n      padding: 20rpx;\n      background: #f8f8f8;\n      margin-bottom: 10rpx;\n    }\n  }\n\n  .cate-cont-box .cate-img {\n    padding: 13rpx 10rpx 4rpx 10rpx;\n    display: block;\n  }\n\n  .cate-cont-box .cate-img image {\n    width: 160rpx;\n    height: 150rpx;\n    float: left;\n    border-radius: 5rpx;\n    display: block;\n    margin-top: 5rpx;\n  }\n\n  .cate-cont-box .cate-info {\n    text-align: left;\n    display: flex;\n    flex-direction: column;\n    font-size: 26rpx;\n    margin-left: 168rpx;\n    padding-bottom: 14rpx;\n    color: #444;\n    padding: 0 15rpx 30rpx 15rpx;\n    .base {\n        height: 100%;\n        display: block;\n        .text {\n            display: block;\n            float: left;\n            width: 100%;\n        }\n        .name {\n            font-weight: bold;\n            width: 100%;\n            font-size: 26rpx;\n            overflow: hidden;\n            display: -webkit-box;\n            -webkit-box-orient: vertical;\n            -webkit-line-clamp: 2;\n        }\n        .stock {\n            margin-top: 10rpx;\n            color: #999;\n        }\n    }\n    .action {\n        display: block;\n        height: 50rpx;\n        .price {\n            margin-top: 20rpx;\n            color: #f03c3c;\n            float: left;\n            font-size: 32rpx;\n            font-weight: bold;\n        }\n        .cart {\n            margin-top: 20rpx;\n            float: right;\n            font-size: 30rpx;\n            height: 60rpx;\n            .ii {\n                float: left;\n                text-align: center;\n                width: 60rpx;\n                cursor: pointer;\n            }\n            .do-add {\n                background: url('~@/static/icon/add.png') no-repeat;\n                background-size: 100% 100%;\n                width: 45rpx;\n                height: 45rpx;\n            }\n            .do-minus {\n                background-image: url('~@/static/icon/minus.png');\n                background-size: 100% 100%;\n                width: 45rpx;\n                height: 45rpx;\n            }\n            .multiSpec {\n                .num-badge {\n                    position: absolute;\n                    margin-top: 10rpx;\n                    margin-right: 25rpx;\n                    font-size: 18rpx;\n                    background: #f03c3c;\n                    text-align: center;\n                    line-height: 36rpx;\n                    color: #ffffff;\n                    border-radius: 50%;\n                    min-width: 36rpx;\n                    padding: 2rpx;\n                    right: 90rpx;\n                }\n                .select-spec {\n                    border: solid 1rpx $fuint-theme;\n                    padding: 10rpx 20rpx 10rpx 20rpx;\n                    font-size: 25rpx;\n                    border-radius: 5rpx;\n                    color: #ffffff;\n                    background: $fuint-theme;\n                }\n            }\n        }\n    }\n  }\n  .cate-two-box {\n    width: 100%;\n    padding: 0 2px;\n  }\n  \n  // 底部操作栏\n  .flow-fixed-footer {\n    position: fixed;\n    bottom: var(--window-bottom);\n    width: 100%;\n    background: #fff;\n    border-top: 1px solid #eee;\n    z-index: 11;\n    padding-top: 8rpx;\n    .chackout-left {\n      font-size: 28rpx;\n      height: 98rpx;\n      color: #777;\n      flex: 4;\n      padding-left: 12px;\n        text-align: right;\n        padding-right: 40rpx;\n        .col-amount-do {\n          font-size: 35rpx;\n          margin-top: 5rpx;\n          margin-bottom:5rpx;\n          .amount {\n              color: #f03c3c;\n              font-weight: bold;\n          }\n        }\n    }\n    \n    .chackout-right {\n      font-size: 34rpx;\n      flex: 2;\n    }\n    \n    // 提交按钮\n    .flow-btn {\n      background: linear-gradient(to right, $fuint-theme, $fuint-theme);\n      color: #fff;\n      text-align: center;\n      line-height: 92rpx;\n      display: block;\n      font-size: 28rpx;\n      border-radius: 5rpx;\n      margin-right: 20rpx;\n       // 禁用按钮\n       &.disabled {\n         background: #ff9779;\n       }\n    }\n  }\n</style>","import mod from \"-!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1758875261236\n      var cssReload = require(\"E:/我的文档/下载/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=1&id=2f754cba&lang=scss&scoped=true&\"; export default mod; export * from \"-!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=1&id=2f754cba&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1758875265059\n      var cssReload = require(\"E:/我的文档/下载/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}