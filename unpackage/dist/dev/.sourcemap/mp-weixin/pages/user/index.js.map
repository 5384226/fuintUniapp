{"version":3,"sources":["uni-app:///main.js",null,"webpack:///D:/project/fuintUniapp/pages/user/index.vue?d437","webpack:///D:/project/fuintUniapp/pages/user/index.vue?e850","webpack:///D:/project/fuintUniapp/pages/user/index.vue?0716","uni-app:///pages/user/index.vue","webpack:///D:/project/fuintUniapp/pages/user/index.vue?b284","webpack:///D:/project/fuintUniapp/pages/user/index.vue?a221"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","id","name","icon","count","type","url","openType","components","Popup","data","SettingKeyEnum","$platform","isLoading","isLogin","setting","userInfo","avatar","gradeId","mobile","balance","gradeInfo","isMerchant","gradeEndTime","assets","prestore","timer","coupon","service","orderNavbar","todoCounts","payment","current","showPopup","memberGrade","curGrade","onShow","methods","getPageData","app","Promise","then","callback","catch","console","initService","item","newService","initOrderTabbar","newOrderNavbar","getSetting","getUserInfo","UserApi","resolve","reject","getUserAssets","getTodoCounts","onShowPopup","toMemberCode","userId","toMemberWallet","toRecharge","onTargetOrder","dataType","onTargetPoints","onTargetMyCoupon","MessageApi","keys","tmplIds","success","fail","complete","onUserInfo","handleService","handleBeMerchant","onPullDownRefresh","uni"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AACmK;AACnK,gBAAgB,6KAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AClBA;AAAA;AAAA;AAAA;AAAkmB,CAAgB,+mBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;ACwGtnB;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA,mBACA;EAAAC;EAAAC;EAAAC;AAAA,GACA;EAAAF;EAAAC;EAAAC;EAAAC;AAAA,GACA;EAAAH;EAAAC;EAAAC;EAAAC;AAAA,EACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAAAH;EAAAC;EAAAC;EAAAE;EAAAC;AAAA;AACA;AACA;EAAAL;EAAAC;EAAAC;EAAAE;EAAAC;AAAA,GACA;EAAAL;EAAAC;EAAAC;EAAAE;EAAAE;AAAA;AACA;AACA;EAAAN;EAAAC;EAAAC;EAAAE;EAAAC;AAAA,GACA;EAAAL;EAAAC;EAAAC;EAAAE;EAAAC;AAAA;AACA;AACA;AAAA,CACA;AAAA,eAEA;EACAE;IACAC;EACA;EACAC;IACA;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;QAAAf;QAAAC;QAAAe;QAAAC;QAAAC;QAAAC;MAAA;MACAC;MACAC;MACAC;MACA;MACAC;QAAAC;QAAAC;QAAAC;MAAA;MACA;MACAC;MACA;MACAC;MACA;MACAC;QAAAC;MAAA;MACAC;MACA;MACAC;MACAC;MACAC;IACA;EACA;EAEA;AACA;AACA;EACAC;IACA;IACA;;IAEA;IACA;;IAEA;IACA;EACA;EAEAC;IACA;IACAC;MACA;MACAC;MACAC,6FACAC;QACAF;QACA;QACAA;QACA;QACAA;QACA;QACAG;MACA,GACAC;QACAC;MACA;IACA;IAEA;IACAC;MACA;MACA;MACAjB;QACA;UACAkB;QACA;QACAC;MACA;MACAR;IACA;IAEA;IACAS;MACA;MACA;MACAnB;QACA;UACAiB;QACA;QACAG;MACA;MACAV;IACA;IAEA;IACAW;MACA;MACAX;IACA;IAEA;IACAY;MAAA;MACA;MACAZ;MACA;QACAa,eACAX;UACA;YACAF;YACAA;UACA;YACAA;YACAA;cAAAtC;cAAAC;cAAAe;cAAAC;cAAAC;cAAAC;YAAA;UACA;;UAEA;UACA;YACA;YACA;UACA;UAEAmB;UACAA;UACAA;UACAA;UACAc;UACAA;UACAA;QACA,GACAV;UACA;YACAJ;YACAc;UACA;YACAC;UACA;QACA;MACA;IACA;IAEA;IACAC;MACA;MACA;QACAH,iBACAX;UACAF;UACAc;QACA,GACAV;UACA;YACAJ;YACAc;UACA;YACAC;UACA;QACA;MACA;IACA;IAEA;IACAE;MACA;MACA;QACA,qDACAf;UACAF;UACAc;QACA;MACA;IACA;IAEA;IACAI;MACA;MACA;MACA;IACA;IAEA;IACAC;MACA;MACA;QAAAC;MAAA;IACA;IAEA;IACAC;MACA;MACA;QAAAD;MAAA;IACA;IAEA;IACAE;MACA;MACA;QAAAF;MAAA;IACA;IAEA;IACAG;MACA;MACA;QAAAC;MAAA;IACA;IAEA;IACAC;MACA;MACA;IACA;IAEA;IACAC;MACA;MACA;QAEAC;UAAAC;QAAA;UACA;UACAvE;YACAwE;YACAC;cACAzB;YACA;YAAA0B;cACA1B;YACA;YAAA2B;cACAhC;YACA;UACA;QACA;MAKA;QACAA;MACA;IACA;IAEA;IACAiC;MACA;QACA;MACA;QACA;MACA;IACA;IAEA;IACAC;MAAA;MACA;IACA;IACA;IACAC;MACA;IACA;EACA;EAEA;AACA;AACA;EACAC;IACA;IACA;MACAC;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACpZA;AAAA;AAAA;AAAA;AAAqqC,CAAgB,snCAAG,EAAC,C;;;;;;;;;;;ACAzrC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/user/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/user/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=137d5072&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=137d5072&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"137d5072\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/user/index.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=137d5072&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 =\n    !_vm.isLoading && _vm.isLogin ? _vm.userInfo.balance.toFixed(2) : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n  <view v-if=\"!isLoading\" class=\"container\">\r\n    <!-- 页面头部 -->\r\n    <view class=\"main-header\">\r\n      <!-- 用户信息 -->\r\n      <view class=\"user-info\">\r\n        <!--头像-->\r\n        <view class=\"user-avatar\" @click=\"onUserInfo\">\r\n          <image class=\"image\" :src=\"userInfo.avatar ? userInfo.avatar : '/static/default-avatar.png'\"></image>\r\n        </view>\r\n        <view class=\"user-content\" @click=\"onUserInfo\">\r\n          <!-- 会员昵称 -->\r\n          <view class=\"nick-name\">{{ userInfo.name ? userInfo.name : '未登录' }}</view>\r\n          <view class=\"login-tips\" v-if=\"!isLogin\">(点击头像登录)</view>\r\n          <!-- 会员等级 -->\r\n          <view v-if=\"userInfo.gradeId > 0 && gradeInfo\" class=\"user-grade\">\r\n            <view class=\"user-grade_icon\">\r\n              <image class=\"image\"\r\n                src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAA0lBMVEUAAAD/tjL/tzH/uDP/uC7/tjH/tzH/tzL/tTH+tTL+tjP/tDD/tTD+tzD/tjL/szD/uDH/tjL/tjL+tjD/tjT/szb/tzL/tTL+uTH+tjL/tjL/tjL/tTT/tjL/tjL+tjH/uTL/vDD/tjL/tjH/tzL9uS//tTL/nBr/sS7/tjH/ujL/szD/uTv+rzf/tzL+tzH+vDP+uzL+tjP+ry7+tDL9ki/7szf/sEX/tTL/tjL+tjL/tTH/tTT/tzH/tzL/tjP/sTX/uTP/wzX+rTn/vDX9vC8m8ckhAAAAOXRSTlMAlnAMB/vjxKWGMh0S6drMiVxPRkEY9PLy0ru0sKagmo5+dGtgVCMgBP716eXWyMGxqJGRe2o5KSmFNjaYAAABP0lEQVQ4y8XS13KDMBAF0AWDDe4t7r3ETu9lVxJgJ/n/X8rKAzHG5TE+Twz3zki7I/g/KXdghIbGJewrU4yzn08Ebgl6TuZzzuOC6W5es3HX6qsSz3NFShRU0MpucytDmOSpu3yULx3CA9RD1HjVedc0jSjqm6ZzhUjDsFDQhSp/OKj5GQvg0+ZCOixsbtDLAeTTOm/yGi8GyIphIVsgH737FEDV44LJa88IRKK/SetrwT9G/GUIr6vXjoy4GXn7+RboVXnghuSjaoGecwQxL2su3CwAKlO+QFoqxI4FMctHQhQd2OhxTu184jWUlI+rMTBTn1/IQcJHQ6GQdZ7pWiDaNdhTt330efISeiqYwQEzQpTlsURJLhzkEmpCPsERfeIUVyXr6MNuIyp5uziW6xURtt7hhGwzmMNJExfO4Bd9X0ZPqAxdNwAAAABJRU5ErkJggg==\">\r\n              </image>\r\n            </view>\r\n            <view class=\"user-grade_name\">\r\n              <text>{{ gradeInfo.name }}</text>\r\n            </view>\r\n          </view>\r\n          <!-- 会员无等级时显示手机号 -->\r\n          <view v-else class=\"mobile\">{{ userInfo.mobile }}</view>\r\n          <view class=\"active-time\" v-if=\"gradeEndTime\">{{ gradeEndTime }}</view>\r\n        </view>\r\n        <view class=\"pay-qr\" @click=\"toMemberCode(userInfo.id ? userInfo.id : 0)\">\r\n          <view class=\"qrcode iconfont icon-qr-extract\"></view>\r\n        </view>\r\n        <view class=\"amount-info\" @click=\"toMemberWallet(userInfo.id ? userInfo.id : 0)\">\r\n          <view class=\"amount-tip\">余额（元）</view>\r\n          <view class=\"amount-num\" v-if=\"isLogin\">{{ userInfo.balance.toFixed(2) }}</view>\r\n          <view class=\"amount-num\" v-if=\"!isLogin\">0.00</view>\r\n          <view class=\"point-amount\" @click=\"onTargetPoints\">积分 {{ userInfo.point ? userInfo.point : 0 }}</view>\r\n        </view>\r\n      </view>\r\n      <view class=\"user-no\">\r\n        <view class=\"no\" v-if=\"userInfo.userNo\">会员号：{{ userInfo.userNo ? userInfo.userNo : '-' }}</view>\r\n        <view class=\"recharge\" @click=\"toRecharge(userInfo.id ? userInfo.id : 0)\">储值有礼</view>\r\n      </view>\r\n    </view>\r\n\r\n\r\n    <!-- 弹窗 -->\r\n    <Popup v-if=\"!isLoading\" v-model=\"showPopup\" @onPaySuccess=\"getPageData\" :memberGrade=\"curGrade\" />\r\n    <!--会员升级 end-->\r\n\r\n    <!-- 订单操作 -->\r\n    <view class=\"order-navbar\">\r\n      <view class=\"order-navbar-item\" v-for=\"(item, index) in orderNavbar\" :key=\"index\" @click=\"onTargetOrder(item)\">\r\n        <view class=\"item-icon\">\r\n          <text class=\"iconfont\" :class=\"[`icon-${item.icon}`]\"></text>\r\n        </view>\r\n        <view class=\"item-name\">{{ item.name }}</view>\r\n        <text class=\"order-badge\" v-if=\"item.count && item.count > 0\">{{ item.count }}</text>\r\n      </view>\r\n    </view>\r\n\r\n\r\n    <!-- 我的服务 -->\r\n    <view class=\"my-service\">\r\n      <view class=\"service-title\">我的服务</view>\r\n      <view class=\"service-content clearfix\">\r\n        <block v-for=\"(item, index) in service\" :key=\"index\">\r\n          <view v-if=\"item.type == 'link'\" class=\"service-item\" @click=\"handleService(item)\">\r\n            <view class=\"item-icon\">\r\n              <text class=\"iconfont\" :class=\"[`icon-${item.icon}`]\"></text>\r\n            </view>\r\n            <view class=\"item-name\">{{ item.name }}</view>\r\n          </view>\r\n          <view v-if=\"item.type == 'button' && $platform == 'MP-WEIXIN'\" class=\"service-item\">\r\n            <button class=\"btn-normal\" :open-type=\"item.openType\">\r\n              <view class=\"item-icon\">\r\n                <text class=\"iconfont\" :class=\"[`icon-${item.icon}`]\"></text>\r\n              </view>\r\n              <view class=\"item-name\">{{ item.name }}</view>\r\n            </button>\r\n          </view>\r\n        </block>\r\n        <block>\r\n          <view v-if=\"isMerchant == true\" class=\"service-item\" @click=\"handleService({ 'url': 'pages/merchant/index' })\">\r\n            <view class=\"item-icon\">\r\n              <text class=\"iconfont icon-dianpu\"></text>\r\n            </view>\r\n            <view class=\"item-name\">商户管理</view>\r\n          </view>\r\n          <view v-else class=\"service-item disabled\" @click=\"handleBeMerchant()\">\r\n            <view class=\"item-icon\">\r\n              <text class=\"iconfont icon-dianpu\"></text>\r\n            </view>\r\n            <view class=\"item-name\">商户管理</view>\r\n          </view>\r\n        </block>\r\n      </view>\r\n    </view>\r\n\r\n    <view class=\"my-recommend\"></view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport SettingKeyEnum from '@/common/enum/setting/Key'\r\nimport SettingModel from '@/common/model/Setting'\r\nimport * as UserApi from '@/api/user'\r\nimport * as OrderApi from '@/api/order'\r\nimport * as MessageApi from '@/api/message'\r\nimport { checkLogin, showMessage } from '@/utils/app'\r\nimport Popup from './components/Popup'\r\n\r\n// 订单操作\r\nconst orderNavbar = [\r\n  { id: 'all', name: '全部订单', icon: 'qpdingdan' },\r\n  { id: 'toPay', name: '待支付', icon: 'daifukuan', count: 0 },\r\n  { id: 'paid', name: '已支付', icon: 'daishouhuo', count: 0 }\r\n]\r\n\r\n/**\r\n * 我的服务\r\n * id: 标识; name: 标题名称; icon: 图标; type 类型(link和button); url: 跳转的链接\r\n */\r\nconst service = [\r\n  // { id: 'myCoupon', name: '卡券兑换', icon: 'youhuiquan', type: 'link', url: 'pages/coupon/receive' },\r\n  // { id: 'coupon', name: '转赠记录', icon: 'lingquan', type: 'link', url: 'pages/give/index' },\r\n  { id: 'points', name: '我的积分', icon: 'jifen', type: 'link', url: 'pages/points/detail' },\r\n  // { id: 'book', name: '我的预约', icon: 'tuxingyanzhengma', type: 'link', url: 'pages/book/my' },\r\n  { id: 'help', name: '我的帮助', icon: 'bangzhu', type: 'link', url: 'pages/help/index' },\r\n  { id: 'contact', name: '在线客服', icon: 'kefu', type: 'button', openType: 'contact' },\r\n  // { id: 'address', name: '收货地址', icon: 'shouhuodizhi', type: 'link', url: 'pages/address/index' },\r\n  { id: 'refund', name: '售后服务', icon: 'shouhou', type: 'link', url: 'pages/refund/index' },\r\n  { id: 'setting', name: '个人信息', icon: 'shezhi1', type: 'link', url: 'pages/user/setting' },\r\n  // { id: 'book', name: '立即预约', icon: 'naozhong', type: 'link', url: 'pages/book/index' },\r\n  // { id: 'share', name: '邀请有礼', icon: 'fenxiang-post', type: 'link', url: 'pages/share/index' },\r\n]\r\n\r\nexport default {\r\n  components: {\r\n    Popup\r\n  },\r\n  data() {\r\n    return {\r\n      // 枚举类\r\n      SettingKeyEnum,\r\n      // 当前运行的终端 (此处并不冗余,因为微信小程序端view层无法直接读取$platform)\r\n      $platform: this.$platform,\r\n      // 正在加载\r\n      isLoading: true,\r\n      // 是否已登录\r\n      isLogin: false,\r\n      // 系统设置\r\n      setting: {},\r\n      // 当前用户信息\r\n      userInfo: { id: 0, name: '', avatar: '', gradeId: 0, mobile: '', balance: 0 },\r\n      gradeInfo: {},\r\n      isMerchant: false,\r\n      gradeEndTime: '',\r\n      // 账户资产\r\n      assets: { prestore: '0', timer: '0', coupon: '0' },\r\n      // 我的服务\r\n      service,\r\n      // 订单操作\r\n      orderNavbar,\r\n      // 当前用户待处理的订单数量\r\n      todoCounts: { payment: 0 },\r\n      current: 0,\r\n      // 显示、隐藏弹窗\r\n      showPopup: false,\r\n      memberGrade: [],\r\n      curGrade: {}\r\n    }\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow(options) {\r\n    // 获取页面数据\r\n    this.getPageData()\r\n\r\n    // 判断是否已登录\r\n    this.isLogin = checkLogin()\r\n\r\n    // 消息显示\r\n    showMessage();\r\n  },\r\n\r\n  methods: {\r\n    // 获取页面数据\r\n    getPageData(callback) {\r\n      const app = this\r\n      app.isLoading = true\r\n      Promise.all([app.getSetting(), app.getUserInfo(), app.getUserAssets(), app.getTodoCounts()])\r\n        .then(result => {\r\n          app.isLoading = false\r\n          // 初始化我的服务数据\r\n          app.initService()\r\n          // 初始化订单操作数据\r\n          app.initOrderTabbar()\r\n          // 执行回调函数\r\n          callback && callback()\r\n        })\r\n        .catch(err => {\r\n          console.log('catch', err)\r\n        })\r\n    },\r\n\r\n    // 初始化我的服务数据\r\n    initService() {\r\n      const app = this\r\n      const newService = []\r\n      service.forEach(item => {\r\n        if (item.id === 'points') {\r\n          item.name = '我的积分'\r\n        }\r\n        newService.push(item)\r\n      })\r\n      app.service = newService\r\n    },\r\n\r\n    // 初始化订单操作数据\r\n    initOrderTabbar() {\r\n      const app = this\r\n      const newOrderNavbar = []\r\n      orderNavbar.forEach(item => {\r\n        if (item.hasOwnProperty('count')) {\r\n          item.count = app.isLogin ? app.todoCounts[item.id] : 0\r\n        }\r\n        newOrderNavbar.push(item)\r\n      })\r\n      app.orderNavbar = newOrderNavbar\r\n    },\r\n\r\n    // 获取设置\r\n    getSetting() {\r\n      const app = this\r\n      app.setting = {}\r\n    },\r\n\r\n    // 获取当前用户信息\r\n    getUserInfo() {\r\n      const app = this\r\n      app.showPopup = false;\r\n      return new Promise((resolve, reject) => {\r\n        UserApi.info()\r\n          .then(result => {\r\n            if (result.data.userInfo) {\r\n              app.userInfo = result.data.userInfo\r\n              app.isLogin = true\r\n            } else {\r\n              app.isLogin = false\r\n              app.userInfo = { id: 0, name: '', avatar: '', gradeId: 0, mobile: '', balance: 0 }\r\n            }\r\n\r\n            // 强制领取会员卡\r\n            if (result.data.openWxCard && app.userInfo) {\r\n              this.$navTo('pages/user/card?userId=' + app.userInfo.id);\r\n              return false;\r\n            }\r\n\r\n            app.gradeInfo = result.data.gradeInfo;\r\n            app.memberGrade = result.data.memberGrade;\r\n            app.gradeEndTime = result.data.gradeEndTime;\r\n            app.isMerchant = result.data.isMerchant;\r\n            resolve(app.userInfo);\r\n            resolve(app.gradeInfo);\r\n            resolve(isMerchant);\r\n          })\r\n          .catch(err => {\r\n            if (err.result && err.result.status == 1001) {\r\n              app.isLogin = false\r\n              resolve(null)\r\n            } else {\r\n              reject(err)\r\n            }\r\n          })\r\n      })\r\n    },\r\n\r\n    // 获取账户资产\r\n    getUserAssets() {\r\n      const app = this\r\n      return new Promise((resolve, reject) => {\r\n        UserApi.assets()\r\n          .then(result => {\r\n            app.assets = result.data.asset\r\n            resolve(app.assets)\r\n          })\r\n          .catch(err => {\r\n            if (err.result && err.result.status == 1001) {\r\n              app.isLogin = false\r\n              resolve(null)\r\n            } else {\r\n              reject(err)\r\n            }\r\n          })\r\n      })\r\n    },\r\n\r\n    // 获取当前用户待处理的事项数量\r\n    getTodoCounts() {\r\n      const app = this\r\n      return new Promise((resolve, reject) => {\r\n        !app.isLogin ? resolve(null) : OrderApi.todoCounts()\r\n          .then(result => {\r\n            app.todoCounts = result.data\r\n            resolve(app.todoCounts)\r\n          })\r\n      })\r\n    },\r\n\r\n    // 会员等级\r\n    onShowPopup(index) {\r\n      this.showPopup = !this.showPopup\r\n      this.current = index\r\n      this.curGrade = this.memberGrade[index]\r\n    },\r\n\r\n    // 跳转到会员码\r\n    toMemberCode(userId) {\r\n      !this.isLogin && this.$navTo('pages/login/index')\r\n      this.$navTo('pages/user/code', { userId: userId })\r\n    },\r\n\r\n    // 跳转我的余额\r\n    toMemberWallet(userId) {\r\n      !this.isLogin && this.$navTo('pages/login/index')\r\n      this.$navTo('pages/wallet/index', { userId: userId })\r\n    },\r\n\r\n    // 跳转充值\r\n    toRecharge(userId) {\r\n      !this.isLogin && this.$navTo('pages/login/index')\r\n      this.$navTo('pages/wallet/recharge/index', { userId: userId })\r\n    },\r\n\r\n    // 跳转到订单页\r\n    onTargetOrder(item) {\r\n      !this.isLogin && this.$navTo('pages/login/index')\r\n      this.$navTo('pages/order/index', { dataType: item.id })\r\n    },\r\n\r\n    // 跳转到我的积分页面\r\n    onTargetPoints() {\r\n      !this.isLogin && this.$navTo('pages/login/index')\r\n      this.$navTo('pages/points/detail')\r\n    },\r\n\r\n    // 跳转到我的卡券列表页\r\n    onTargetMyCoupon(type) {\r\n      const app = this\r\n      if (app.isLogin) {\r\n        // #ifdef MP-WEIXIN\r\n        MessageApi.getSubTemplate({ keys: \"couponExpire,couponArrival\" }).then(result => {\r\n          const templateIds = result.data\r\n          wx.requestSubscribeMessage({\r\n            tmplIds: templateIds,\r\n            success(res) {\r\n              console.log(\"调用成功！\")\r\n            }, fail(res) {\r\n              console.log(\"调用失败:\", res)\r\n            }, complete() {\r\n              app.$navTo('pages/my-coupon/index?type=' + type)\r\n            }\r\n          })\r\n        })\r\n        // #endif\r\n        // #ifndef MP-WEIXIN\r\n        app.$navTo('pages/my-coupon/index?type=' + type)\r\n        // #endif\r\n      } else {\r\n        app.$navTo('pages/login/index')\r\n      }\r\n    },\r\n\r\n    // 跳转会员设置页面\r\n    onUserInfo() {\r\n      if (!this.isLogin) {\r\n        this.$navTo('pages/login/index')\r\n      } else {\r\n        this.$navTo('pages/user/setting')\r\n      }\r\n    },\r\n\r\n    // 跳转到服务页面\r\n    handleService({ url }) {\r\n      this.$navTo(url)\r\n    },\r\n    // 成为商家\r\n    handleBeMerchant() {\r\n      this.$error('请联系管理员添加您的员工身份信息！');\r\n    }\r\n  },\r\n\r\n  /**\r\n   * 下拉刷新\r\n   */\r\n  onPullDownRefresh() {\r\n    // 获取首页数据\r\n    this.getPageData(() => {\r\n      uni.stopPullDownRefresh()\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n// 页面头部\r\n.main-header {\r\n  background: url('~@/static/background/user-header.png') no-repeat;\r\n  height: 380rpx;\r\n  background-size: cover;\r\n  overflow: hidden;\r\n  display: block;\r\n  align-items: center;\r\n  margin: 10rpx 25rpx 10rpx 25rpx;\r\n  border-radius: 10rpx;\r\n\r\n  .user-info {\r\n    display: block;\r\n    height: 200rpx;\r\n    margin: 20rpx;\r\n    margin-left: 20rpx;\r\n\r\n    .user-avatar {\r\n      padding-top: 10rpx;\r\n      width: 50rpx;\r\n      margin-top: 70rpx;\r\n      float: left;\r\n\r\n      .image {\r\n        display: block;\r\n        width: 100rpx;\r\n        height: 100rpx;\r\n        border-radius: 999rpx;\r\n      }\r\n    }\r\n\r\n    .user-content {\r\n      display: block;\r\n      justify-content: center;\r\n      margin-top: 80rpx;\r\n      margin-left: 60rpx;\r\n      float: left;\r\n      color: #ffffff;\r\n      max-width: 300rpx;\r\n\r\n      .nick-name {\r\n        font-size: 32rpx;\r\n        font-weight: bold;\r\n        max-width: 270rpx;\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n      }\r\n\r\n      .mobile {\r\n        margin-top: 15rpx;\r\n        font-size: 26rpx;\r\n      }\r\n\r\n      .user-grade {\r\n        display: block;\r\n        align-items: center;\r\n        background: #3c3c3c;\r\n        margin-top: 8rpx;\r\n        border-radius: 10rpx;\r\n        padding: 5rpx 12rpx;\r\n        width: 80%;\r\n        min-width: 160rpx;\r\n        height: 40rpx;\r\n\r\n        .user-grade_icon .image {\r\n          display: block;\r\n          width: 32rpx;\r\n          height: 32rpx;\r\n          float: left;\r\n        }\r\n\r\n        .user-grade_name {\r\n          margin-left: 5rpx;\r\n          font-size: 24rpx;\r\n          color: #EEE0C3;\r\n          float: left;\r\n        }\r\n      }\r\n\r\n      .active-time {\r\n        margin-top: 3rpx;\r\n      }\r\n\r\n      .login-tips {\r\n        margin-top: 9rpx;\r\n        font-size: 25rpx;\r\n      }\r\n    }\r\n\r\n    .amount-info {\r\n      margin-top: 80rpx;\r\n      margin-left: 70rpx;\r\n      color: #fff;\r\n      display: block;\r\n      float: left;\r\n      max-width: 120rpx;\r\n\r\n      .amount-tip {\r\n        font-size: 24rpx;\r\n      }\r\n\r\n      .amount-num {\r\n        margin-top: 10rpx;\r\n        font-weight: bold;\r\n        font-size: 48rpx;\r\n      }\r\n\r\n      .point-amount {\r\n        display: block;\r\n        margin-top: 2px;\r\n        width: 100px;\r\n      }\r\n    }\r\n\r\n    .pay-qr {\r\n      color: #ffffff;\r\n      margin-top: 10rpx;\r\n      margin-left: 50rpx;\r\n      text-align: center;\r\n      width: 50rpx;\r\n      float: right;\r\n\r\n      .qrcode {\r\n        display: block;\r\n        font-size: 40rpx;\r\n      }\r\n    }\r\n  }\r\n\r\n  .user-no {\r\n    display: block;\r\n    font-size: 25rpx;\r\n    margin: 110rpx 0rpx 0rpx 20rpx;\r\n    color: #ffffff;\r\n\r\n    .no {\r\n      float: left;\r\n    }\r\n\r\n    .recharge {\r\n      float: right;\r\n      margin-right: 20rpx;\r\n    }\r\n  }\r\n}\r\n\r\n// 我的资产\r\n.my-asset {\r\n  display: flex;\r\n  background: #fff;\r\n  margin: 10rpx 20rpx 10rpx 20rpx;\r\n  padding: 40rpx 0;\r\n  border: 2rpx #f5f5f5 solid;\r\n  border-radius: 10rpx;\r\n\r\n  .asset-right {\r\n    width: 200rpx;\r\n    border-left: 1rpx solid #eee;\r\n  }\r\n\r\n  .asset-left-item {\r\n    text-align: center;\r\n    color: #666;\r\n    padding: 0 72rpx;\r\n    width: 33%;\r\n\r\n    .item-value {\r\n      font-size: 35rpx;\r\n      color: #f03c3c;\r\n      font-weight: bold;\r\n    }\r\n\r\n    .item-name {\r\n      font-size: 25rpx;\r\n      margin-top: 6rpx;\r\n    }\r\n  }\r\n\r\n}\r\n\r\n// 订单操作\r\n.order-navbar {\r\n  display: flex;\r\n  margin: 12rpx auto 10rpx auto;\r\n  padding: 20rpx 0;\r\n  width: 94%;\r\n  box-shadow: 0 1rpx 5rpx 0px rgba(0, 0, 0, 0.05);\r\n  font-size: 30rpx;\r\n  border-radius: 10rpx;\r\n  background: #fff;\r\n  border: 2rpx #f5f5f5 solid;\r\n\r\n  &-item {\r\n    position: relative;\r\n    width: 33%;\r\n\r\n    .item-icon {\r\n      text-align: center;\r\n      margin: 0 auto;\r\n      padding: 10rpx 0;\r\n      color: #545454;\r\n      font-size: 48rpx;\r\n      font-weight: bold;\r\n    }\r\n\r\n    .item-name {\r\n      font-size: 24rpx;\r\n      color: #545454;\r\n      text-align: center;\r\n      margin-right: 10rpx;\r\n    }\r\n\r\n    .order-badge {\r\n      position: absolute;\r\n      top: 0;\r\n      right: 58rpx;\r\n      font-size: 20rpx;\r\n      background: #fa5151;\r\n      text-align: center;\r\n      line-height: 30rpx;\r\n      color: #fff;\r\n      border-radius: 50%;\r\n      min-width: 36rpx;\r\n      padding: 6rpx 13rpx 6rpx 13rpx;\r\n    }\r\n  }\r\n}\r\n\r\n// 我的服务\r\n.my-service {\r\n  margin: 0rpx auto 20rpx auto;\r\n  border: 2rpx #f5f5f5 solid;\r\n  background: #FFF;\r\n  padding: 10rpx 0rpx;\r\n  width: 94%;\r\n  box-shadow: 0 1rpx 5rpx 0px rgba(0, 0, 0, 0.05);\r\n  border-radius: 10rpx;\r\n  display: block;\r\n\r\n  .service-title {\r\n    padding-left: 20rpx;\r\n    margin-bottom: 30rpx;\r\n    font-size: 28rpx;\r\n  }\r\n\r\n  .service-content {\r\n    .service-item {\r\n      width: 25%;\r\n      float: left;\r\n      margin-bottom: 25rpx;\r\n\r\n      .item-icon {\r\n        text-align: center;\r\n        margin: 0 auto;\r\n        padding: 10rpx 0;\r\n        color: #ff3800;\r\n        font-size: 40rpx;\r\n      }\r\n\r\n      .item-name {\r\n        font-size: 24rpx;\r\n        color: #545454;\r\n        text-align: center;\r\n        margin-right: 10rpx;\r\n      }\r\n    }\r\n\r\n    .disabled {\r\n      .item-icon {\r\n        color: #cccccc;\r\n      }\r\n\r\n      .item-name {\r\n        color: #cccccc;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// 推荐信息\r\n.my-recommend {\r\n  height: 20rpx;\r\n}\r\n\r\n// 会员升级\r\n.member-update {\r\n  margin: 22rpx auto 0rpx auto;\r\n  padding: 20rpx 0;\r\n  border-radius: 10rpx;\r\n  box-shadow: 0 1rpx 5rpx 0px rgba(0, 0, 0, 0.05);\r\n  background: #fff;\r\n  width: 94%;\r\n  text-align: center;\r\n\r\n  .update-title {\r\n    padding-left: 20rpx;\r\n    margin-bottom: 30rpx;\r\n    font-size: 28rpx;\r\n    text-align: left;\r\n  }\r\n\r\n  .recharge {\r\n    position: relative;\r\n    margin-bottom: 35rpx;\r\n    display: flex;\r\n    flex-direction: row;\r\n    align-items: center;\r\n\r\n    &-tag {\r\n      position: absolute;\r\n      top: -2rpx;\r\n      left: -2rpx;\r\n      width: 170rpx;\r\n      height: 36rpx;\r\n      display: flex;\r\n      flex-direction: row;\r\n      align-items: center;\r\n      justify-content: center;\r\n      background-image: url('~@/static/user/tag.png');\r\n      background-size: 100%;\r\n\r\n      &-text {\r\n        font-size: 20rpx;\r\n        color: #FFFFFF;\r\n        text-align: center;\r\n      }\r\n    }\r\n\r\n    &-item {\r\n      position: relative;\r\n      padding: 40rpx 0;\r\n      margin-left: 15rpx;\r\n      width: 29.33%;\r\n      height: 270rpx;\r\n      flex-shrink: 0;\r\n      display: flex;\r\n      flex-direction: column;\r\n      align-items: center;\r\n      border: solid 1rpx #CBCCCE;\r\n      border-radius: 12rpx;\r\n\r\n      &-active {\r\n        border: solid 2rpx #EDD2A9;\r\n        background-color: #FBF1E5;\r\n      }\r\n\r\n      &-duration {\r\n        margin-bottom: 30rpx;\r\n        font-size: 26rpx;\r\n        color: #1C1C1C;\r\n      }\r\n\r\n      &-price {\r\n        margin-bottom: 20rpx;\r\n        display: flex;\r\n        flex-direction: row;\r\n        align-items: baseline;\r\n\r\n        &-text {\r\n          font-size: 48rpx;\r\n          color: #E3BE83;\r\n        }\r\n      }\r\n\r\n      &-des {\r\n        font-size: 22rpx;\r\n        color: #A5A3A2;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=137d5072&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=137d5072&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1758979353493\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}