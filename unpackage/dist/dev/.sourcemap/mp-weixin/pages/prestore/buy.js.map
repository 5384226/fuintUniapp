{"version":3,"sources":["uni-app:///main.js","webpack:///D:/project/fuintUniapp/pages/prestore/buy.vue?2224","webpack:///D:/project/fuintUniapp/pages/prestore/buy.vue?e975","webpack:///D:/project/fuintUniapp/pages/prestore/buy.vue?9616","webpack:///D:/project/fuintUniapp/pages/prestore/buy.vue?b567","uni-app:///pages/prestore/buy.vue","webpack:///D:/project/fuintUniapp/pages/prestore/buy.vue?2033","webpack:///D:/project/fuintUniapp/pages/prestore/buy.vue?0039","webpack:///D:/project/fuintUniapp/pages/prestore/buy.vue?b664","webpack:///D:/project/fuintUniapp/pages/prestore/buy.vue?da23"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","jyfParser","Shortcut","Popup","data","isLoading","couponId","couponInfo","storeRule","showPopup","onLoad","methods","onRefreshPage","app","Promise","finally","getCouponDetail","CouponApi","then","ruleItem","resolve","catch","onShowPopup","onTargetHome","onShareAppMessage","title","path","onShareTimeline"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,YAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4H;AAC5H;AACuD;AACL;AACa;AACyB;;;AAGxF;AACmK;AACnK,gBAAgB,6KAAU;AAC1B,EAAE,yEAAM;AACR,EAAE,0FAAM;AACR,EAAE,mGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,8FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACxBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,0PAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjCA;AAAA;AAAA;AAAA;AAAgmB,CAAgB,6mBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;ACgGpnB;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAKA;EACAC;IACAC;IACAC;IACAC;EACA;EACAC;IACA;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;IACA;EACA;EAEA;AACA;AACA;EACAC;IACA;IACA;IACA;IACA;EACA;EAEAC;IAEA;IACAC;MACA;MACAC;MACAC,qCACAC;QAAA;MAAA;IACA;IAEA;IACAC;MACA;MACA;QACAC,+BACAC;UACAL;UACA;UACAM;YACA;YACAN;cAAA;cAAA;YAAA;UACA;UACAO;QACA,GACAC;UAAA;QAAA;MACA;IACA;IAEA;AACA;AACA;IACAC;MACA;IACA;IAEA;IACAC;MACA;IACA;EAEA;EAEA;AACA;AACA;EACAC;IACA;IACA;IACA;MACAlB;IACA;IACA;MACAmB;MACAC;IACA;EACA;EAEA;AACA;AACA;AACA;AACA;EACAC;IACA;IACA;IACA;MACArB;IACA;IACA;MACAmB;MACAC;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;AC7MA;AAAA;AAAA;AAAA;AAAm3B,CAAgB,k2BAAG,EAAC,C;;;;;;;;;;;ACAv4B;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA;AAAA;AAAmqC,CAAgB,onCAAG,EAAC,C;;;;;;;;;;;ACAvrC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/prestore/buy.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/prestore/buy.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./buy.vue?vue&type=template&id=dcaad8e4&scoped=true&\"\nvar renderjs\nimport script from \"./buy.vue?vue&type=script&lang=js&\"\nexport * from \"./buy.vue?vue&type=script&lang=js&\"\nimport style0 from \"./buy.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./buy.vue?vue&type=style&index=1&id=dcaad8e4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dcaad8e4\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/prestore/buy.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buy.vue?vue&type=template&id=dcaad8e4&scoped=true&\"","var components\ntry {\n  components = {\n    jyfParser: function () {\n      return import(\n        /* webpackChunkName: \"components/jyf-parser/jyf-parser\" */ \"@/components/jyf-parser/jyf-parser.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buy.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buy.vue?vue&type=script&lang=js&\"","<template>\r\n  <view v-show=\"!isLoading\" class=\"container\">\r\n    <!-- 卡券信息 -->\r\n    <view v-if=\"!isLoading\" class=\"coupon-info m-top20\">\r\n      <!-- 标题、分享 -->\r\n      <view class=\"info-item info-item__name dis-flex flex-y-center\">\r\n        <view class=\"coupon-name flex-box\">\r\n          <text class=\"twolist-hidden\">{{ couponInfo.name }}</text>\r\n        </view>\r\n        <!-- #ifdef MP-WEIXIN -->\r\n        <view class=\"coupon-share__line\"></view>\r\n        <view class=\"coupon-share\">\r\n          <button class=\"share-btn dis-flex flex-dir-column\" open-type=\"share\">\r\n            <text class=\"share__icon iconfont icon-fenxiang\"></text>\r\n            <text class=\"f-24\">分享</text>\r\n          </button>\r\n        </view>\r\n        <!-- #endif -->\r\n      </view>\r\n      <!-- 卡券预存规则 -->\r\n      <view class=\"store-rule\">\r\n          <view class=\"title\">预存规则：</view>\r\n          <view v-for=\"(item, index) in storeRule\" :key=\"index\" class=\"item\">\r\n            <text>预存￥{{ item.store }} 到账 ￥{{ item.upStore }}</text>\r\n          </view>\r\n      </view>\r\n      <view class=\"info-item\">\r\n          <text>已有<text class=\"number\">{{ couponInfo.gotNum }}</text>人预存，剩余<text class=\"number\">{{ couponInfo.limitNum }}</text>名额</text>\r\n      </view>\r\n      <view class=\"info-item\">\r\n          <text>有效期：{{ couponInfo.effectiveDate }}</text>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 选择卡券规格 -->\r\n    <view class=\"coupon-choice m-top20 b-f\" @click=\"onShowPopup()\">\r\n      <view class=\"spec-list\">\r\n        <view class=\"flex-box\">\r\n          <text class=\"col-8\">选择：</text>\r\n          <text class=\"spec-name\" key=\"index\">预存金额、数量</text>\r\n        </view>\r\n        <view class=\"f-26 col-9 t-r\">\r\n          <text class=\"iconfont icon-xiangyoujiantou\"></text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 预存选项弹窗 -->\r\n    <Popup v-if=\"!isLoading\" v-model=\"showPopup\" :couponInfo=\"couponInfo\" :storeRule=\"storeRule\"/>\r\n\r\n    <!-- 卡券描述 -->\r\n    <view v-if=\"!isLoading\" class=\"coupon-content m-top20\">\r\n      <view class=\"item-title b-f\">\r\n        <text>卡券描述</text>\r\n      </view>\r\n      <block v-if=\"couponInfo.description != ''\">\r\n        <view class=\"coupon-content-detail b-f\">\r\n          <jyf-parser :html=\"couponInfo.description\"></jyf-parser>\r\n        </view>\r\n      </block>\r\n      <empty v-else tips=\"亲，暂无卡券描述\" />\r\n    </view>\r\n\r\n    <!-- 底部选项卡 -->\r\n    <view class=\"footer-fixed\">\r\n      <view class=\"footer-container\">\r\n        <!-- 导航图标 -->\r\n        <view class=\"foo-item-fast\">\r\n          <!-- 客服 (仅微信小程序端显示) -->\r\n          <!-- #ifdef MP-WEIXIN -->\r\n          <button class=\"btn-normal\" open-type=\"contact\">\r\n            <view class=\"fast-item\">\r\n              <view class=\"fast-icon\">\r\n                <text class=\"iconfont icon-kefu1\"></text>\r\n              </view>\r\n              <view class=\"fast-text\">\r\n                <text>客服</text>\r\n              </view>\r\n            </view>\r\n          </button>\r\n          <!-- #endif -->\r\n        </view>\r\n        <!-- 操作按钮 -->\r\n        <view class=\"foo-item-btn\">\r\n          <view class=\"btn-wrapper\">\r\n            <view class=\"btn-item btn-item-main\" @click=\"onShowPopup()\">\r\n              <text>立即预存</text>\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\n  import * as CouponApi from '@/api/coupon'\r\n  import jyfParser from '@/components/jyf-parser/jyf-parser'\r\n  import Shortcut from '@/components/shortcut'\r\n  import Popup from './components/Popup'\r\n\r\n  export default {\r\n    components: {\r\n      jyfParser,\r\n      Shortcut,\r\n      Popup\r\n    },\r\n    data() {\r\n      return {\r\n        // 正在加载\r\n        isLoading: true,\r\n        // 当前卡券ID\r\n        couponId: null,\r\n        // 卡券详情\r\n        couponInfo: null,\r\n        // 预存规则\r\n        storeRule: [],\r\n        // 显示/隐藏弹窗\r\n        showPopup: false\r\n      }\r\n    },\r\n\r\n    /**\r\n     * 生命周期函数--监听页面加载\r\n     */\r\n    onLoad(options) {\r\n      // 卡券ID\r\n      this.couponId = parseInt(options.couponId)\r\n      // 加载页面数据\r\n      this.onRefreshPage()\r\n    },\r\n\r\n    methods: {\r\n\r\n      // 刷新页面数据\r\n      onRefreshPage() {\r\n        const app = this\r\n        app.isLoading = true\r\n        Promise.all([app.getCouponDetail()])\r\n          .finally(() => app.isLoading = false)\r\n      },\r\n\r\n      // 获取卡券信息\r\n      getCouponDetail() {\r\n        const app = this\r\n        return new Promise((resolve, reject) => {\r\n          CouponApi.detail(app.couponId)\r\n            .then(result => {\r\n              app.couponInfo = result.data\r\n              let ruleItem = app.couponInfo.inRule.split(\",\");\r\n              ruleItem.forEach(function(item) {\r\n                  let rule = item.split(\"_\")\r\n                  app.storeRule.push({\"store\": rule[0], \"upStore\": rule[1]})\r\n              })\r\n              resolve(result)\r\n            })\r\n            .catch(err => reject(err))\r\n        })\r\n      },\r\n\r\n      /**\r\n       * 显示/隐藏预存弹窗\r\n       */\r\n      onShowPopup() {\r\n        this.showPopup = !this.showPopup\r\n      },\r\n\r\n      // 跳转到首页\r\n      onTargetHome(e) {\r\n        this.$navTo('pages/index/index')\r\n      }\r\n      \r\n    },\r\n\r\n    /**\r\n     * 分享当前页面\r\n     */\r\n    onShareAppMessage() {\r\n      const app = this\r\n      // 构建页面参数\r\n      const params = app.$getShareUrlParams({\r\n        couponId: app.couponId\r\n      })\r\n      return {\r\n        title: app.couponInfo.name,\r\n        path: `/pages/prestore/buy?${params}`\r\n      }\r\n    },\r\n\r\n    /**\r\n     * 分享到朋友圈\r\n     * 本接口为 Beta 版本，暂只在 Android 平台支持，详见分享到朋友圈 (Beta)\r\n     * https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/share-timeline.html\r\n     */\r\n    onShareTimeline() {\r\n      const app = this\r\n      // 构建页面参数\r\n      const params = app.$getShareUrlParams({\r\n        couponId: app.couponId,\r\n      })\r\n      return {\r\n        title: app.couponInfo.name,\r\n        path: `/pages/prestore/buy?${params}`\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  page {\r\n    background: #fafafa;\r\n  }\r\n</style>\r\n<style lang=\"scss\" scoped>\r\n  @import \"./buy.scss\";\r\n</style>\r\n","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buy.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buy.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1758976367572\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buy.vue?vue&type=style&index=1&id=dcaad8e4&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buy.vue?vue&type=style&index=1&id=dcaad8e4&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1758976369377\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}