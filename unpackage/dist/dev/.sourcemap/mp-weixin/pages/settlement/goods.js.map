{"version":3,"sources":["uni-app:///main.js","webpack:///D:/项目/fuintUniapp/pages/settlement/goods.vue?1723","webpack:///D:/项目/fuintUniapp/pages/settlement/goods.vue?9bc9","webpack:///D:/项目/fuintUniapp/pages/settlement/goods.vue?201a","webpack:///D:/项目/fuintUniapp/pages/settlement/goods.vue?5f8e","uni-app:///pages/settlement/goods.vue","webpack:///D:/项目/fuintUniapp/pages/settlement/goods.vue?d776","webpack:///D:/项目/fuintUniapp/pages/settlement/goods.vue?6651"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","selectSwitch","data","PayTypeEnum","options","curPayType","remark","disabled","onLoad","onShow","app","methods","getCartList","orderMode","CartApi","then","resolve","catch","getDefaultAddress","AddressApi","handleShowPoints","handleShowPopup","handleSelectCoupon","handleNotUseCoupon","handleSelectPayType","onSelectAddress","from","switchMode","getStoreInfo","settingApi","onSubmitOrder","doSubmitOrder","SettlementApi","onSubmitCallback","navToOrderResult","message"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AAC0M;AAC1M,gBAAgB,yMAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,mNAEN;AACP,KAAK;AACL;AACA,aAAa,6MAEN;AACP,KAAK;AACL;AACA,aAAa,6MAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACxDA;AAAA;AAAA;AAAA;AAAwxB,CAAgB,2vBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;AC4Q5yB;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAEA;EACAC;IACAC;EACA;EACAC;IAAA;IACA;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;IAAA,mDAEA,yDACA,uDAEA,uDACA,oDACA,oDACA,uDACA,yDACA,oEACA,sDACA,4DACA,6DACA,mDACA,oDACA,0DACA,0DAEA,yDAEA,8DAEA,qDAEA,yDACA,2DAEA,uDAEA,uDAEA;EAEA;EAEA;AACA;AACA;EACAC;IACA;EACA;EAEA;AACA;AACA;EACAC;IACA;IACA;MACAC;IACA;IACA;IACAA;IACA;IACAA;IACA;IACAA;EACA;EAEAC;IACA;IACAC;MACA;MACA;QACAF;QACAA;MACA;MACA;QACA;QACA;QACA;UACAG;QACA;QACAC,8IACAC;UACAL;UACAA;UACAA;UACAA;UACAA;UACAA;UACAA;UACAA;UACAA;UACA;YACAA;UACA;UACAA;UACAA;UACAM;QACA,GACAC;UAAA;QAAA;MACA;IACA;IAEA;IACAC;MACA;MACAC,qBACAJ;QACAL;MACA;IACA;IAEA;IACAU;MACA;IACA;IAEA;IACAC;MACA;IACA;IAEA;IACAC;MACA;MACA;MACA;MACA;MACA;QACAZ;QACA;MACA;MACAA;MACA;MACAA;MACA;MACAA;IACA;IAEA;IACAa;MACA;MACAb;MACA;MACAA;MACA;MACAA;IACA;IAEA;IACAc;MACA;IACA;IAEA;IACAC;MACA;QAAAC;MAAA;IACA;IAEA;IACAC;MACA;MACAjB;MACA;QACAA;MACA;MACAA;IACA;IAEA;IACAkB;MACA;MACA;QACAC,yBACAd;UACAL;QACA;MACA;MACAA;MACAmB,0BACAd;QACAL;QACA;QACA;UACA;YACA;cACAA;YACA;UACA;QACA;MACA;IACA;IAEA;IACAoB;MACA;MACA;QACA;MACA;MAEA;QACApB;QACA;MACA;;MAEA;MACA;QACAA;QACA;MACA;;MAEA;MACA;MACA;QACAG;MACA;MACA;QACAH;MACA;QACAA;MACA;IACA;IAEA;IACAqB;MACA;MACA;QACArB;QACA;MACA;MAEA;QACAA;QACAA;QACA;MACA;;MAEA;MACA;QACAA;QACA;MACA;;MAEA;MACA;MACA;QACAG;MACA;;MAEA;MACAH;;MAEA;MACAsB,2LACAjB;QACAL;MACA,GACAO;QACA;UACA;UACA;YACAP;YACA;UACA;QACA;QACAA;MACA;IACA;IAEA;IACAuB;MACA;MACA;QACA;UACAvB;QACA;UACAA;QACA;QACAA;QACA;MACA;;MAEA;MACA;QAIA;UACAA;QACA;UACAA;QACA;UACAA;UACAA;QACA;MACA;;MAEA;MACA;QACAA;QACAA;MACA;;MAEA;MACA;QACAA;QACAA;MACA;IACA;IAEA;IACAwB;MACA;QACAC;MACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;AC3lBA;AAAA;AAAA;AAAA;AAA++C,CAAgB,k3CAAG,EAAC,C;;;;;;;;;;;ACAngD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/settlement/goods.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/settlement/goods.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./goods.vue?vue&type=template&id=38cab12e&scoped=true&\"\nvar renderjs\nimport script from \"./goods.vue?vue&type=script&lang=js&\"\nexport * from \"./goods.vue?vue&type=script&lang=js&\"\nimport style0 from \"./goods.vue?vue&type=style&index=0&id=38cab12e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"38cab12e\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/settlement/goods.vue\"\nexport default component.exports","export * from \"-!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./goods.vue?vue&type=template&id=38cab12e&scoped=true&\"","var components\ntry {\n  components = {\n    uSwitch: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-switch/u-switch\" */ \"@/uview-ui/components/u-switch/u-switch.vue\"\n      )\n    },\n    uModal: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-modal/u-modal\" */ \"@/uview-ui/components/u-modal/u-modal.vue\"\n      )\n    },\n    uPopup: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-popup/u-popup\" */ \"@/uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.couponList.length\n  var g1 = g0 > 0 && !_vm.useCouponInfo ? _vm.couponList.length : null\n  var g2 = _vm.payPrice ? _vm.payPrice.toFixed(2) : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./goods.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./goods.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"container p-bottom\">\n    <view class=\"flow-mode\">\n        <selectSwitch :switchList=\"orderModeList\" checked_bj_color=\"#00acac\" @change=\"switchMode\"/> \n    </view>\n    <!-- 快递配送：配送地址 -->\n    <view @click=\"onSelectAddress\" v-if=\"orderMode == false\" class=\"flow-delivery\">\n      <view class=\"flow-delivery__detail dis-flex flex-y-center\">\n        <view class=\"detail-location dis-flex\">\n          <text class=\"iconfont icon-dingwei\"></text>\n        </view>\n        <view class=\"detail-content flex-box\">\n          <block v-if=\"address\">\n            <view class=\"detail-content__title dis-flex\">\n              <text class=\"f-30\">{{ address.name }}</text>\n              <text class=\"detail-content__title-phone f-28\">{{ address.mobile }}</text>\n            </view>\n            <view class=\"address-info detail-content__describe\">\n              <text class=\"region\">{{ address.provinceName }}{{ address.cityName }}{{ address.regionName }}</text>\n              <text class=\"detail\">{{ address.detail }}</text>\n              <text class=\"icon\"> » </text>\n            </view>\n          </block>\n          <block v-else>\n            <view class=\"detail-content__describe dis-flex select-address\">\n              <text class=\"col-6\">请选择配送地址 <text class=\"icon\"> > </text></text>\n            </view>\n          </block>\n        </view>\n        <view class=\"detail-arrow dis-flex\">\n          <text class=\"iconfont icon-arrow-right\"></text>\n        </view>\n      </view>\n    </view>\n    \n    <!-- 门店自提：自提地址 -->\n    <view v-if=\"orderMode == true\" class=\"flow-delivery\">\n      <view class=\"flow-delivery__detail dis-flex flex-y-center\">\n        <view class=\"detail-location dis-flex\">\n           <text class=\"iconfont icon-dingwei\"></text>\n        </view>\n        <view class=\"detail-content flex-box\">\n          <block>\n            <view class=\"store\">\n                <view class=\"f-30 store-name\">{{ storeInfo ? storeInfo.name : '' }}</view>\n                <view class=\"f-30 store-phone\">{{ storeInfo ? storeInfo.phone : '' }}</view>\n                <text class=\"f-30 store-address\">{{ storeInfo ? storeInfo.address : '' }}</text>\n            </view>\n          </block>\n        </view>\n        <view class=\"detail-arrow dis-flex\">\n          <text class=\"iconfont icon-arrow-right\"></text>\n        </view>\n      </view>\n    </view>\n    \n    <!-- 商品列表 -->\n    <view class=\"m-top20\">\n      <view v-for=\"(item, index) in goodsCart\" :key=\"index\" class=\"checkout_list\">\n        <view class=\"flow-shopList dis-flex\">\n          <!-- 商品图片 -->\n          <view class=\"flow-list-left\">\n            <image mode=\"scaleToFill\" :src=\"item.goodsInfo.logo\"></image>\n          </view>\n          <view class=\"flow-list-right flex-box\">\n            <!-- 商品名称 -->\n            <text class=\"goods-name twolist-hidden\">{{ item.goodsInfo.name }}</text>\n            \n            <!-- 商品规格 -->\n            <view class=\"goods-props clearfix\">\n              <view class=\"goods-props-item\" v-for=\"(props, idx) in item.specList\" :key=\"idx\">\n                <text class=\"group-name\">{{ props.specName }}: </text>\n                <text>{{ props.specValue }}；</text>\n              </view>\n            </view>\n            \n             <!-- 商品数量和单价 -->\n            <view class=\"flow-list-cont dis-flex flex-x-between flex-y-center\">\n              <text class=\"small\"> x {{ item.num }} </text>\n              <text class=\"flow-cont\">￥{{ item.goodsInfo.price }} </text>\n            </view>\n          </view>\n        </view>\n      </view>\n      <view class=\"flow-num-box b-f\">\n        <text>共{{ totalNum }}件，合计：</text>\n        <text class=\"flow-money col-m\">￥{{ totalPrice }}</text>\n      </view>\n    </view>\n    \n    <!-- 订单折扣 -->\n    <view class=\"flow-all-money b-f m-top20\">\r\n      <view class=\"detail-title\">费用明细</view>\n      <!-- 卡券 -->\n      <view class=\"flow-all-list dis-flex\">\n        <text class=\"flex-five\">使用卡券抵扣：</text>\n        <view class=\"flex-five t-r\">\n          <view v-if=\"couponList.length > 0\" @click=\"handleShowPopup()\">\n            <text class=\"col-m\" v-if=\"useCouponInfo\">-￥{{ useCouponInfo.amount }}</text>\n            <text class=\"col-m\" v-else>共有卡券{{ couponList.length }}张</text>\n            <text class=\"right-arrow iconfont icon-arrow-right\"></text>\n          </view>\n          <text v-else>无卡券可用</text>\n        </view>\n      </view>\n      <!-- 积分抵扣 -->\n      <view class=\"points flow-all-list dis-flex flex-y-center\" v-if=\"usePoint > 0\">\n        <view class=\"block-left flex-five\" @click=\"handleShowPoints()\">\n          <text class=\"title\">使用{{ usePoint }}积分抵扣：</text>\n          <text class=\"iconfont icon-help\"></text>\n        </view>\n        <view class=\"flex-five dis-flex flex-x-end flex-y-center\">\n          <text class=\"points-money col-m\">-￥{{ usePointAmount }}</text>\n          <u-switch v-model=\"isUsePoints\" size=\"48\" active-color=\"#00acac\" @change=\"getCartList()\"></u-switch>\n        </view>\n      </view>\r\n      <!-- 会员折扣 -->\r\n      <view class=\"points flow-all-list dis-flex flex-y-center\">\r\n        <view class=\"block-left flex-five\">\r\n          <text class=\"title\">会员支付折扣：</text>\r\n        </view>\r\n        <view class=\"flex-five dis-flex flex-x-end flex-y-center\">\r\n          <text>{{ (memberDiscount < 10 && memberDiscount > 0) ? memberDiscount : '无折扣' }}折</text>\r\n        </view>\r\n      </view>\r\n      <!-- 运费 -->\r\n      <view class=\"points flow-all-list dis-flex flex-y-center\" v-if=\"deliveryFee > 0 && orderMode == false\">\r\n        <view class=\"block-left flex-five\">\r\n          <text class=\"title\">配送费用：</text>\r\n        </view>\r\n        <view class=\"flex-five dis-flex flex-x-end flex-y-center\">\r\n          <text class=\"points-money col-m\">￥{{ deliveryFee }}</text>\r\n        </view>\r\n      </view>\n    </view>\n\n    <!-- 支付方式 -->\n    <view class=\"pay-method flow-all-money b-f m-top20\">\n      <view class=\"flow-all-list dis-flex\">\n        <text class=\"flex-five\">支付方式</text>\n      </view>\n      <!-- 微信支付 -->\n      <view class=\"pay-item dis-flex flex-x-between\" @click=\"handleSelectPayType(PayTypeEnum.WECHAT.value)\">\n        <view class=\"item-left dis-flex flex-y-center\">\n          <view class=\"item-left_icon wechat\">\n            <text class=\"iconfont icon-weixinzhifu\"></text>\n          </view>\n          <view class=\"item-left_text\">\n            <text>{{ PayTypeEnum.WECHAT.name }}</text>\n          </view>\n        </view>\n        <view class=\"item-right col-m\" v-if=\"curPayType == PayTypeEnum.WECHAT.value\">\n          <text class=\"iconfont icon-duihao\"></text>\n        </view>\n      </view>\n    </view>\n\n    <!-- 买家留言 -->\n    <view class=\"flow-all-money b-f m-top20\">\n      <view class=\"ipt-wrapper\">\r\n        <textarea v-model=\"remark\" rows=\"3\" maxlength=100 placeholder=\"买家留言 (选填,100字以内)\" type=\"text\"></textarea>\n      </view>\n    </view>\n\n    <!-- 提交订单 -->\n    <view class=\"flow-fixed-footer b-f m-top10\">\n      <view class=\"dis-flex chackout-box\">\n        <view class=\"chackout-left pl-12\">\n          <view class=\"col-amount-do\">支付金额：\n              <text class=\"pay-amount\">￥{{ payPrice ? payPrice.toFixed(2) : '0.00' }}</text>\n          </view>\n        </view>\n        <view class=\"chackout-right\" @click=\"onSubmitOrder()\">\n          <view class=\"flow-btn f-32\" :class=\"{ disabled }\">提交订单</view>\n        </view>\n      </view>\n    </view>\n    \n     <!-- 积分说明弹窗 -->\n        <u-modal v-model=\"showPoints\" :title=\"`积分说明`\">\n          <scroll-view class=\"points-content\" :scroll-y=\"true\">\n            <text>积分兑换金额</text>\n          </scroll-view>\n        </u-modal>\n    \n        <!-- 卡券弹出框 -->\n        <u-popup v-model=\"showPopup\" mode=\"bottom\">\n          <view class=\"popup__coupon\">\n            <view class=\"coupon__title f-30\">选择卡券</view>\n            <!-- 卡券列表 -->\n            <view class=\"coupon-list\">\n              <scroll-view :scroll-y=\"true\" style=\"height: 565rpx;\">\n                <view class=\"coupon-item\" v-for=\"(item, index) in couponList\" :key=\"index\">\n                  <view class=\"item-wrapper\"\n                    :class=\"[item.status == 'A' ? 'color-default': 'color-gray']\"\n                    @click=\"handleSelectCoupon(index)\">\n                    <view class=\"coupon-type\">{{ item.type }}</view>\n                    <view class=\"tip dis-flex flex-dir-column flex-x-center\">\n                      <text class=\"money\">￥{{ item.amount }}</text>\n                      <text class=\"pay-line\">{{ item.description }}</text>\n                    </view>\n                    <view class=\"split-line\"></view>\n                    <view class=\"content dis-flex flex-dir-column flex-x-between\">\n                      <view class=\"title\">{{ item.name }}</view>\n                      <view class=\"bottom dis-flex flex-y-center\">\n                        <view class=\"time flex-box\">\n                          <block>{{ item.effectiveDate }}</block>\n                        </view>\n                      </view>\n                    </view>\n                  </view>\n                </view>\n              </scroll-view>\n            </view>\n            <!-- 不使用卡券 -->\n            <view class=\"coupon__do_not dis-flex flex-y-center flex-x-center\">\n              <view class=\"control dis-flex flex-y-center flex-x-center\" @click=\"handleNotUseCoupon()\">\n                <text class=\"f-26\">不使用卡券</text>\n              </view>\n            </view>\n          </view>\n        </u-popup>\n        \n        <!-- 支付方式弹窗 -->\n        <u-popup v-model=\"showPayPopup\" mode=\"bottom\" :closeable=\"true\">\n          <view class=\"pay-type-popup\">\n            <view class=\"title\">请选择支付方式</view>\n            <view class=\"pop-content\">\n              <!-- 微信支付 -->\n              <view class=\"pay-item dis-flex flex-x-between\" @click=\"doSubmitOrder(PayTypeEnum.WECHAT.value)\">\n                <view class=\"item-left dis-flex flex-y-center\">\n                  <view class=\"item-left_icon wechat\">\n                    <text class=\"iconfont icon-weixinzhifu\"></text>\n                  </view>\n                  <view class=\"item-left_text\">\n                    <text>{{ PayTypeEnum.WECHAT.name }}</text>\n                  </view>\n                </view>\n              </view>\r\n              <!-- 余额支付 -->\n              <view class=\"pay-item dis-flex flex-x-between\" @click=\"doSubmitOrder(PayTypeEnum.BALANCE.value)\">\n                <view class=\"item-left dis-flex flex-y-center\">\n                  <view class=\"item-left_icon balance\">\n                    <text class=\"iconfont icon-qiandai\"></text>\n                  </view>\n                  <view class=\"item-left_text\">\n                    <text>{{ PayTypeEnum.BALANCE.name }}</text>\n                  </view>\n                </view>\n              </view>\r\n              <!-- 前台支付 -->\r\n              <view class=\"pay-item dis-flex flex-x-between\" v-if=\"payOffLine\" @click=\"doSubmitOrder(PayTypeEnum.STORE.value)\">\r\n                <view class=\"item-left dis-flex flex-y-center\">\r\n                  <view class=\"item-left_icon balance\">\r\n                    <text class=\"iconfont icon-qianbao\"></text>\r\n                  </view>\r\n                  <view class=\"item-left_text\">\r\n                    <text>{{ PayTypeEnum.STORE.name }}</text>\r\n                  </view>\r\n                </view>\r\n              </view>\n            </view>\n          </view>\n        </u-popup>\n  </view>\n</template>\n\n<script>\n  import * as Verify from '@/utils/verify'\n  import * as CartApi from '@/api/cart'\n  import * as SettlementApi from '@/api/settlement'\n  import DeliveryTypeEnum from '@/common/enum/order/DeliveryType'\n  import PayTypeEnum from '@/common/enum/order/PayType'\n  import { wxPayment } from '@/utils/app'\n  import selectSwitch from \"@/components/xuan-switch/xuan-switch.vue\";\n  import * as AddressApi from '@/api/address'\n  import * as settingApi from '@/api/setting'\n\n  export default {\n    components: {\n      selectSwitch\n    },\n    data() {\n      return {\n        // 枚举类\n        PayTypeEnum,\n        // 当前页面参数\n        options: {},\n        // 当前选中的支付方式\n        curPayType: PayTypeEnum.WECHAT.value,\n        // 买家留言\n        remark: '',\n        // 禁用submit按钮\n        disabled: false,\n        // 按钮禁用\n        disabled: false,\n        goodsCart: [],\n        // 优惠券列表\n        couponList: [],\n        totalPrice: 0,\n        payPrice: 0,\n        totalNum: 0,\r\n        deliveryFee: 0,\n        orderModeList: ['门店自提', '物流配送'],\n        orderMode: true,\n        address: null,\n        useCouponInfo: null,\n        selectCouponId: 0,\n        myPoint: 0,\n        usePoint: 0,\n        usePointAmount: 0.00,\n        // 是否使用积分抵扣\n        isUsePoints: true,\n        // 是否显示积分说明\n        showPoints: false,\r\n        // 会员折扣\r\n        memberDiscount: 0,\n        // 是否显示卡券弹窗\n        showPopup: false,\n        storeInfo: null,\n        // 支付方式弹窗\n        showPayPopup: false,\r\n        // 订单ID\r\n        orderId: \"\",\r\n        // 门店支付\r\n        payOffLine: false\n      }\n    },\n\n    /**\n     * 生命周期函数--监听页面加载\n     */\n    onLoad(options) {\n      this.options = options;\n    },\n\n    /**\n     * 生命周期函数--监听页面显示\n     */\n    onShow() {\n        const app = this;\r\n        if (app.orderId) {\r\n            app.navToOrderResult(app.orderId);\r\n        }\n        // 获取购物车信息\n        app.getCartList();\n        // 获取默认收货地址\n        app.getDefaultAddress();\r\n        // 获取店铺信息\r\n        app.getStoreInfo();\n    },\n\n    methods: {\n      // 获取购物车信息\n      getCartList() {\n        const app = this\n        if (!app.isUsePoints) {\n            app.usePoint = 0;\n            app.usePointAmount = 0;\n        }\n        return new Promise((resolve, reject) => {\r\n          // 配送或自取\r\n          let orderMode = \"oneself\";\r\n          if (!app.orderMode) {\r\n              orderMode = \"express\";\r\n          }\n          CartApi.list(app.options.cartIds, app.options.goodsId, app.options.skuId, app.options.buyNum, app.selectCouponId, app.isUsePoints, orderMode)\n            .then(result => {\n              app.goodsCart = result.data.list;\n              app.totalNum = result.data.totalNum;\n              app.totalPrice = result.data.totalPrice;\n              app.payPrice = result.data.payPrice;\n              app.couponList = result.data.couponList;\n              app.useCouponInfo = result.data.useCouponInfo;\n              app.usePoint = result.data.usePoint;\n              app.myPoint = result.data.myPoint;\r\n              app.deliveryFee = result.data.deliveryFee;\n              if (app.usePoint < 1) {\n                  app.isUsePoints = false;\n              }\n              app.usePointAmount = result.data.usePointAmount;\r\n              app.memberDiscount = result.data.memberDiscount ? result.data.memberDiscount : 0;\n              resolve(result);\n            })\n            .catch(err => reject(err))\n        })\n      },\n      \n      // 获取默认收货地址\n      getDefaultAddress() {\n        const app = this\n        AddressApi.detail(0)\n          .then(result => {\n              app.address = result.data.address ? result.data.address : null;\n          })\n      },\n      \n      // 显示积分说明\n      handleShowPoints() {\n          this.showPoints = true;\n      },\n\n      // 显示卡券弹窗\n      handleShowPopup() {\n          this.showPopup = true;\n      },\n\n      // 选择卡券\n      handleSelectCoupon(index) {\n          const app = this;\n          // 当前选择的卡券\n          const couponItem = app.couponList[index];\n          // 记录选中的卡券id\n          if (couponItem.status != 'A') {\n              app.$error('该卡券不可用');\n              return false;\n          }\n          app.selectCouponId = couponItem.userCouponId;\n          // 重新获取购物车信息\n          app.getCartList();\n          // 隐藏卡券弹层\n          app.showPopup = false;\n      },\n\n      // 不使用卡券\n      handleNotUseCoupon() {\n          const app = this;\n          app.selectCouponId = 0;\n          // 重新获取购物车信息\n          app.getCartList();\n          // 隐藏卡券弹层\n          app.showPopup = false;\n      },\n      \n      // 选择支付方式\n      handleSelectPayType(value) {\n        this.curPayType = value\n      },\n      \n      // 快递配送：选择收货地址\n      onSelectAddress() {\n         this.$navTo('pages/address/index', { from: 'checkout' })\n      },\n      \n      // 切换配送模式\n      switchMode(mode) {\n         const app = this;\n         app.orderMode = mode;\n         if (mode && !app.storeInfo) {\n             app.getStoreInfo();\n         }\r\n         app.getCartList();\n      },\r\n      \r\n      // 获取店铺详情\r\n      getStoreInfo() {\r\n         const app = this;\r\n         if (!app.storeInfo) {\r\n             settingApi.storeDetail()\r\n             .then(result => {\r\n                 app.storeInfo = result.data.storeInfo;\r\n             })\r\n         }\r\n         app.payOffLine = false;\r\n         settingApi.systemConfig()\r\n          .then(result => {\r\n              app.storeInfo = result.data.storeInfo;\r\n              const payTypeList = result.data.payTypeList;\r\n              if (payTypeList && payTypeList.length > 0) {\r\n                  for (let i = 0; i < payTypeList.length; i++) {\r\n                       if (payTypeList[i] && payTypeList[i].key && payTypeList[i].key == 'STORE') {\r\n                           app.payOffLine = true;\r\n                       }\r\n                  }\r\n              }\r\n          })\r\n      },\n      \n      // 弹出支付方式\n      onSubmitOrder() {\n          const app = this\n          if (app.disabled) {\n              return false\n          }\n          \n          if (app.totalPrice < 0 || app.goodsCart.length < 1) {\n              app.disabled = true\n              return false\n          }\n          \n          // 表单验证\n          if (!app.orderMode && app.address == undefined) {\n              app.$toast('请先选择配送地址哦')\n              return false\n          }\n          \n          // 配送或自取\n          let orderMode = \"oneself\";\n          if (!app.orderMode) {\n              orderMode = \"express\";\n          }\n          if (!app.payPrice) {\r\n              app.doSubmitOrder(PayTypeEnum.BALANCE.value)\r\n          } else {\r\n              app.showPayPopup = true;\r\n          }\n      },\n\n      // 订单提交\n      doSubmitOrder(payType) {\n        const app = this;\n        if (app.disabled) {\r\n            app.$toast('请勿重复提交订单');\n            return false;\n        }\r\n        \n        if (app.totalPrice < 0 || app.goodsCart.length < 1) {\r\n            app.$toast('提交订单商品有误');\n            app.disabled = true;\n            return false;\n        }\n        \n        // 表单验证\n        if (!app.orderMode && app.address == undefined) {\n            app.$toast('请先选择配送地址哦');\n            return false;\n        }\n        \n        // 配送或自取\n        let orderMode = \"oneself\";\n        if (!app.orderMode) {\n            orderMode = \"express\";\n        }\n        \n        // 按钮禁用\n        app.disabled = true;\n        \n        // 请求api\n        SettlementApi.submit(0, \"\", \"goods\", app.remark, 0, app.usePoint, app.selectCouponId, app.options.cartIds, app.options.goodsId, app.options.skuId, app.options.buyNum, orderMode, payType)\n          .then(result => {\r\n              app.onSubmitCallback(result);\r\n          })\n          .catch(err => {\n            if (err.result) {\n                const errData = err.result.data;\n                if (errData.isCreated) {\n                    app.navToOrderResult(errData.orderInfo.id);\n                    return false;\n                }\n            }\n            app.disabled = false;\n          })\n      },\n\n      // 订单提交成功后回调\n      onSubmitCallback(result) {\n        const app = this;\n        if (result.code != '200' && !result.data) {\n            if (result.message) {\n                app.$error(result.message);\n            } else {\n                app.$error('订单提交失败');\n            }\n            app.disabled = false;\n            return false;\n        }\n        \n        // 发起微信支付\n        if (result.data.payType == PayTypeEnum.WECHAT.value) {\r\n            // #ifdef H5\r\n            app.orderId = result.data.orderInfo.id;\r\n            // #endif\n            wxPayment(result.data.payment).then(() => {\r\n                app.$success('支付成功');\r\n            }).catch(err => {\r\n                app.$error('支付失败');\r\n            }).finally(() => {\n                app.disabled = false;\n                app.navToOrderResult(result.data.orderInfo.id, '');\n            })\n        }\n        \n        // 余额支付\n        if (result.data.payType == PayTypeEnum.BALANCE.value) {\n            app.disabled = false;\n            app.navToOrderResult(result.data.orderInfo.id, result.message);\n        }\r\n        \r\n        // 门店支付\r\n        if (result.data.payType == PayTypeEnum.STORE.value) {\r\n            app.disabled = false;\r\n            app.navToOrderResult(result.data.orderInfo.id, result.message);\r\n        }\n      },\n\n      // 跳转到订单结果页\n      navToOrderResult(orderId, message) {\r\n        if (!message || message == undefined) {\r\n            message = \"\";\r\n        }\n        this.$navTo('pages/order/result?orderId='+orderId+'&message=' + message);\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  @import \"./style.scss\";\n</style>\n","import mod from \"-!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./goods.vue?vue&type=style&index=0&id=38cab12e&lang=scss&scoped=true&\"; export default mod; export * from \"-!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\我的文档\\\\下载\\\\HBuilderX.4.76.2025082103\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./goods.vue?vue&type=style&index=0&id=38cab12e&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1758875266152\n      var cssReload = require(\"E:/我的文档/下载/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}