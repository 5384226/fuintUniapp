<view class="container p-bottom data-v-38cab12e"><view class="flow-mode data-v-38cab12e"><select-switch vue-id="e08a7286-1" switchList="{{orderModeList}}" checked_bj_color="#00acac" data-event-opts="{{[['^change',[['switchMode']]]]}}" bind:change="__e" class="data-v-38cab12e" bind:__l="__l"></select-switch></view><block wx:if="{{orderMode==false}}"><view data-event-opts="{{[['tap',[['onSelectAddress',['$event']]]]]}}" class="flow-delivery data-v-38cab12e" bindtap="__e"><view class="flow-delivery__detail dis-flex flex-y-center data-v-38cab12e"><view class="detail-location dis-flex data-v-38cab12e"><text class="iconfont icon-dingwei data-v-38cab12e"></text></view><view class="detail-content flex-box data-v-38cab12e"><block wx:if="{{address}}"><block class="data-v-38cab12e"><view class="detail-content__title dis-flex data-v-38cab12e"><text class="f-30 data-v-38cab12e">{{address.name}}</text><text class="detail-content__title-phone f-28 data-v-38cab12e">{{address.mobile}}</text></view><view class="address-info detail-content__describe data-v-38cab12e"><text class="region data-v-38cab12e">{{address.provinceName+address.cityName+address.regionName}}</text><text class="detail data-v-38cab12e">{{address.detail}}</text><text class="icon data-v-38cab12e">»</text></view></block></block><block wx:else><block class="data-v-38cab12e"><view class="detail-content__describe dis-flex select-address data-v-38cab12e"><text class="col-6 data-v-38cab12e">请选择配送地址<text class="icon data-v-38cab12e">></text></text></view></block></block></view><view class="detail-arrow dis-flex data-v-38cab12e"><text class="iconfont icon-arrow-right data-v-38cab12e"></text></view></view></view></block><block wx:if="{{orderMode==true}}"><view class="flow-delivery data-v-38cab12e"><view class="flow-delivery__detail dis-flex flex-y-center data-v-38cab12e"><view class="detail-location dis-flex data-v-38cab12e"><text class="iconfont icon-dingwei data-v-38cab12e"></text></view><view class="detail-content flex-box data-v-38cab12e"><block class="data-v-38cab12e"><view class="store data-v-38cab12e"><view class="f-30 store-name data-v-38cab12e">{{storeInfo?storeInfo.name:''}}</view><view class="f-30 store-phone data-v-38cab12e">{{storeInfo?storeInfo.phone:''}}</view><text class="f-30 store-address data-v-38cab12e">{{storeInfo?storeInfo.address:''}}</text></view></block></view><view class="detail-arrow dis-flex data-v-38cab12e"><text class="iconfont icon-arrow-right data-v-38cab12e"></text></view></view></view></block><view class="m-top20 data-v-38cab12e"><block wx:for="{{goodsCart}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="checkout_list data-v-38cab12e"><view class="flow-shopList dis-flex data-v-38cab12e"><view class="flow-list-left data-v-38cab12e"><image mode="scaleToFill" src="{{item.goodsInfo.logo}}" class="data-v-38cab12e"></image></view><view class="flow-list-right flex-box data-v-38cab12e"><text class="goods-name twolist-hidden data-v-38cab12e">{{item.goodsInfo.name}}</text><view class="goods-props clearfix data-v-38cab12e"><block wx:for="{{item.specList}}" wx:for-item="props" wx:for-index="idx" wx:key="idx"><view class="goods-props-item data-v-38cab12e"><text class="group-name data-v-38cab12e">{{props.specName+':'}}</text><text class="data-v-38cab12e">{{props.specValue+"；"}}</text></view></block></view><view class="flow-list-cont dis-flex flex-x-between flex-y-center data-v-38cab12e"><text class="small data-v-38cab12e">{{'x '+item.num+''}}</text><text class="flow-cont data-v-38cab12e">{{"￥"+item.goodsInfo.price+''}}</text></view></view></view></view></block><view class="flow-num-box b-f data-v-38cab12e"><text class="data-v-38cab12e">{{"共"+totalNum+"件，合计："}}</text><text class="flow-money col-m data-v-38cab12e">{{"￥"+totalPrice}}</text></view></view><view class="flow-all-money b-f m-top20 data-v-38cab12e"><view class="detail-title data-v-38cab12e">费用明细</view><view class="flow-all-list dis-flex data-v-38cab12e"><text class="flex-five data-v-38cab12e">使用卡券抵扣：</text><view class="flex-five t-r data-v-38cab12e"><block wx:if="{{$root.g0>0}}"><view data-event-opts="{{[['tap',[['handleShowPopup']]]]}}" bindtap="__e" class="data-v-38cab12e"><block wx:if="{{useCouponInfo}}"><text class="col-m data-v-38cab12e">{{"-￥"+useCouponInfo.amount}}</text></block><block wx:else><text class="col-m data-v-38cab12e">{{"共有卡券"+$root.g1+"张"}}</text></block><text class="right-arrow iconfont icon-arrow-right data-v-38cab12e"></text></view></block><block wx:else><text class="data-v-38cab12e">无卡券可用</text></block></view></view><block wx:if="{{usePoint>0}}"><view class="points flow-all-list dis-flex flex-y-center data-v-38cab12e"><view data-event-opts="{{[['tap',[['handleShowPoints']]]]}}" class="block-left flex-five data-v-38cab12e" bindtap="__e"><text class="title data-v-38cab12e">{{"使用"+usePoint+"积分抵扣："}}</text><text class="iconfont icon-help data-v-38cab12e"></text></view><view class="flex-five dis-flex flex-x-end flex-y-center data-v-38cab12e"><text class="points-money col-m data-v-38cab12e">{{"-￥"+usePointAmount}}</text><u-switch vue-id="e08a7286-2" size="48" active-color="#00acac" value="{{isUsePoints}}" data-event-opts="{{[['^change',[['getCartList']]],['^input',[['__set_model',['','isUsePoints','$event',[]]]]]]}}" bind:change="__e" bind:input="__e" class="data-v-38cab12e" bind:__l="__l"></u-switch></view></view></block><view class="points flow-all-list dis-flex flex-y-center data-v-38cab12e"><view class="block-left flex-five data-v-38cab12e"><text class="title data-v-38cab12e">会员支付折扣：</text></view><view class="flex-five dis-flex flex-x-end flex-y-center data-v-38cab12e"><text class="data-v-38cab12e">{{(memberDiscount<10&&memberDiscount>0?memberDiscount:'无折扣')+"折"}}</text></view></view><block wx:if="{{deliveryFee>0&&orderMode==false}}"><view class="points flow-all-list dis-flex flex-y-center data-v-38cab12e"><view class="block-left flex-five data-v-38cab12e"><text class="title data-v-38cab12e">配送费用：</text></view><view class="flex-five dis-flex flex-x-end flex-y-center data-v-38cab12e"><text class="points-money col-m data-v-38cab12e">{{"￥"+deliveryFee}}</text></view></view></block></view><view class="pay-method flow-all-money b-f m-top20 data-v-38cab12e"><view class="flow-all-list dis-flex data-v-38cab12e"><text class="flex-five data-v-38cab12e">支付方式</text></view><view data-event-opts="{{[['tap',[['handleSelectPayType',['$0'],['PayTypeEnum.WECHAT.value']]]]]}}" class="pay-item dis-flex flex-x-between data-v-38cab12e" bindtap="__e"><view class="item-left dis-flex flex-y-center data-v-38cab12e"><view class="item-left_icon wechat data-v-38cab12e"><text class="iconfont icon-weixinzhifu data-v-38cab12e"></text></view><view class="item-left_text data-v-38cab12e"><text class="data-v-38cab12e">{{PayTypeEnum.WECHAT.name}}</text></view></view><block wx:if="{{curPayType==PayTypeEnum.WECHAT.value}}"><view class="item-right col-m data-v-38cab12e"><text class="iconfont icon-duihao data-v-38cab12e"></text></view></block></view></view><view class="flow-all-money b-f m-top20 data-v-38cab12e"><view class="ipt-wrapper data-v-38cab12e"><textarea rows="3" maxlength="100" placeholder="买家留言 (选填,100字以内)" type="text" data-event-opts="{{[['input',[['__set_model',['','remark','$event',[]]]]]]}}" value="{{remark}}" bindinput="__e" class="data-v-38cab12e"></textarea></view></view><view class="flow-fixed-footer b-f m-top10 data-v-38cab12e"><view class="dis-flex chackout-box data-v-38cab12e"><view class="chackout-left pl-12 data-v-38cab12e"><view class="col-amount-do data-v-38cab12e">支付金额：<text class="pay-amount data-v-38cab12e">{{"￥"+(payPrice?$root.g2:'0.00')}}</text></view></view><view data-event-opts="{{[['tap',[['onSubmitOrder']]]]}}" class="chackout-right data-v-38cab12e" bindtap="__e"><view class="{{['flow-btn','f-32','data-v-38cab12e',(disabled)?'disabled':'']}}">提交订单</view></view></view></view><u-modal bind:input="__e" vue-id="e08a7286-3" title="积分说明" value="{{showPoints}}" data-event-opts="{{[['^input',[['__set_model',['','showPoints','$event',[]]]]]]}}" class="data-v-38cab12e" bind:__l="__l" vue-slots="{{['default']}}"><scroll-view class="points-content data-v-38cab12e" scroll-y="{{true}}"><text class="data-v-38cab12e">积分兑换金额</text></scroll-view></u-modal><u-popup bind:input="__e" vue-id="e08a7286-4" mode="bottom" value="{{showPopup}}" data-event-opts="{{[['^input',[['__set_model',['','showPopup','$event',[]]]]]]}}" class="data-v-38cab12e" bind:__l="__l" vue-slots="{{['default']}}"><view class="popup__coupon data-v-38cab12e"><view class="coupon__title f-30 data-v-38cab12e">选择卡券</view><view class="coupon-list data-v-38cab12e"><scroll-view style="height:565rpx;" scroll-y="{{true}}" class="data-v-38cab12e"><block wx:for="{{couponList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="coupon-item data-v-38cab12e"><view data-event-opts="{{[['tap',[['handleSelectCoupon',[index]]]]]}}" class="{{['item-wrapper','data-v-38cab12e',item.status=='A'?'color-default':'color-gray']}}" bindtap="__e"><view class="coupon-type data-v-38cab12e">{{item.type}}</view><view class="tip dis-flex flex-dir-column flex-x-center data-v-38cab12e"><text class="money data-v-38cab12e">{{"￥"+item.amount}}</text><text class="pay-line data-v-38cab12e">{{item.description}}</text></view><view class="split-line data-v-38cab12e"></view><view class="content dis-flex flex-dir-column flex-x-between data-v-38cab12e"><view class="title data-v-38cab12e">{{item.name}}</view><view class="bottom dis-flex flex-y-center data-v-38cab12e"><view class="time flex-box data-v-38cab12e"><block class="data-v-38cab12e">{{item.effectiveDate}}</block></view></view></view></view></view></block></scroll-view></view><view class="coupon__do_not dis-flex flex-y-center flex-x-center data-v-38cab12e"><view data-event-opts="{{[['tap',[['handleNotUseCoupon']]]]}}" class="control dis-flex flex-y-center flex-x-center data-v-38cab12e" bindtap="__e"><text class="f-26 data-v-38cab12e">不使用卡券</text></view></view></view></u-popup><u-popup bind:input="__e" vue-id="e08a7286-5" mode="bottom" closeable="{{true}}" value="{{showPayPopup}}" data-event-opts="{{[['^input',[['__set_model',['','showPayPopup','$event',[]]]]]]}}" class="data-v-38cab12e" bind:__l="__l" vue-slots="{{['default']}}"><view class="pay-type-popup data-v-38cab12e"><view class="title data-v-38cab12e">请选择支付方式</view><view class="pop-content data-v-38cab12e"><view data-event-opts="{{[['tap',[['doSubmitOrder',['$0'],['PayTypeEnum.WECHAT.value']]]]]}}" class="pay-item dis-flex flex-x-between data-v-38cab12e" bindtap="__e"><view class="item-left dis-flex flex-y-center data-v-38cab12e"><view class="item-left_icon wechat data-v-38cab12e"><text class="iconfont icon-weixinzhifu data-v-38cab12e"></text></view><view class="item-left_text data-v-38cab12e"><text class="data-v-38cab12e">{{PayTypeEnum.WECHAT.name}}</text></view></view></view><view data-event-opts="{{[['tap',[['doSubmitOrder',['$0'],['PayTypeEnum.BALANCE.value']]]]]}}" class="pay-item dis-flex flex-x-between data-v-38cab12e" bindtap="__e"><view class="item-left dis-flex flex-y-center data-v-38cab12e"><view class="item-left_icon balance data-v-38cab12e"><text class="iconfont icon-qiandai data-v-38cab12e"></text></view><view class="item-left_text data-v-38cab12e"><text class="data-v-38cab12e">{{PayTypeEnum.BALANCE.name}}</text></view></view></view><block wx:if="{{payOffLine}}"><view data-event-opts="{{[['tap',[['doSubmitOrder',['$0'],['PayTypeEnum.STORE.value']]]]]}}" class="pay-item dis-flex flex-x-between data-v-38cab12e" bindtap="__e"><view class="item-left dis-flex flex-y-center data-v-38cab12e"><view class="item-left_icon balance data-v-38cab12e"><text class="iconfont icon-qianbao data-v-38cab12e"></text></view><view class="item-left_text data-v-38cab12e"><text class="data-v-38cab12e">{{PayTypeEnum.STORE.name}}</text></view></view></view></block></view></view></u-popup></view>